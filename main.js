!function(){"use strict";const t={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error"},e={profileEditForm:document.forms["profile-form"],addCardForm:document.forms["card-form"],profileEditButton:document.querySelector("#profile-edit-button"),addCardButton:document.querySelector("#profile-add-button"),profileEditPopup:document.querySelector("#profile-edit-popup"),addCardPopup:document.querySelector("#add-card-popup"),picturePopup:document.querySelector("#picture-popup"),profileTitle:document.querySelector(".profile__title"),profileDescription:document.querySelector(".profile__description"),profileTitleInput:document.querySelector("#profile-title-input"),profileDescriptionInput:document.querySelector("#profile-description-input"),cardListEl:document.querySelector(".cards__list"),addCardTitleInput:document.querySelector("#add-card-title"),addCardUrlInput:document.querySelector("#add-card-url")};class n{constructor(t,e,n){let{name:s,link:i}=t;this._name=s,this._link=i,this._cardSelector=e,this._handleImageClick=n}_createCardElement(){const t=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0);return this._cardElement=t,this._likeButton=this._cardElement.querySelector(".card__like-button"),this._trashButton=this._cardElement.querySelector(".card__trash-button"),this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._cardTitleEl.textContent=this._name,this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardElement}_setEventListeners(){this._likeButton.addEventListener("click",(()=>this._likeButton.classList.toggle("card__like-button_active"))),this._trashButton.addEventListener("click",(()=>this._cardElement.remove())),this._cardImageEl.addEventListener("click",(()=>this._handleImageClick(this._link,this._name)))}getView(){return this._createCardElement(),this._setEventListeners(),this._cardElement}}class s{constructor(t,e){this._settings=t,this._formElement=e,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._submitButton=this._formElement.querySelector(this._settings.submitButtonSelector)}_hasInvalidInput(){return this._inputList.some((t=>!t.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():(this._submitButton.classList.remove(this._settings.inactiveButtonClass),this._submitButton.disabled=!1)}_checkInputValidity(t){const e=this._formElement.querySelector(`#${t.id}-error`);t.validity.valid?(t.classList.remove(this._settings.inputErrorClass),e.textContent=""):(t.classList.add(this._settings.inputErrorClass),e.textContent=t.validationMessage)}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}enableValidation(){this._setEventListeners()}resetValidation(){this._inputList.forEach((t=>{const e=this._formElement.querySelector(`#${t.id}-error`);t.classList.remove(this._settings.inputErrorClass),e.textContent=""})),this._toggleButtonState()}disableButton(){this._submitButton.classList.add(this._settings.inactiveButtonClass),this._submitButton.disabled=!0}}class i{constructor(t){this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(t){"Escape"===t.key&&this.close()}setEventListeners(){this._popupElement.querySelector(".popup__close").addEventListener("click",(()=>this.close())),this._popupElement.addEventListener("click",(t=>{t.target===this._popupElement&&this.close()}))}}class r extends i{constructor(t,e){super(t),this._handleFormSubmit=e,this._formElement=this._popupElement.querySelector(".popup__form"),this._inputList=Array.from(this._formElement.querySelectorAll(".popup__input"))}_getInputValues(){const t={};return this._inputList.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super.setEventListeners(),this._formElement.addEventListener("submit",(t=>{t.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._formElement.reset()}))}}const{profileEditForm:o,addCardForm:a,profileEditButton:l,addCardButton:c,profileTitleInput:u,profileDescriptionInput:p,cardListEl:d}=e,m=new class{constructor(t){let{nameSelector:e,descriptionSelector:n}=t;this._nameElement=document.querySelector(e),this._descriptionElement=document.querySelector(n)}getUserInfo(){return{name:this._nameElement.textContent,description:this._descriptionElement.textContent}}setUserInfo(t){let{name:e,description:n}=t;this._nameElement.textContent=e,this._descriptionElement.textContent=n}}({nameSelector:".profile__title",descriptionSelector:".profile__description"});function _(t,e){S.open({name:e,link:t})}function h(t){return new n(t,"#card-template",_).getView()}const E=new class{constructor(t,e){let{items:n,renderer:s}=t;this._items=n,this._renderer=s,this._container=document.querySelector(e)}renderItems(){this._items.forEach((t=>{this._renderer(t)}))}addItem(t){this._container.prepend(t)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:t=>{const e=h(t);E.addItem(e)}},".cards__list"),f=new r("#profile-edit-popup",(t=>{m.setUserInfo({name:t.name,description:t.description}),f.close()}));f.setEventListeners();const g=new r("#add-card-popup",(t=>{const e=h({name:t.title,link:t.url});y.disableButton(),E.addItem(e),g.close()}));g.setEventListeners();const S=new class extends i{constructor(t){super(t),this._imageElement=this._popupElement.querySelector(".popup__image"),this._captionElement=this._popupElement.querySelector(".popup__caption")}open(t){let{name:e,link:n}=t;this._imageElement.src=n,this._imageElement.alt=e,this._captionElement.textContent=e,super.open()}}("#picture-popup");S.setEventListeners();const v=new s(t,o),y=new s(t,a);v.enableValidation(),y.enableValidation(),E.renderItems(),l.addEventListener("click",(function(){const t=m.getUserInfo();u.value=t.name,p.value=t.description,v.resetValidation(),f.open()})),c.addEventListener("click",(()=>{g.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVFxQyxFQUFTNUIsWUFFekMyQixFQUFxQnhELGtCQUNyQmdELEVBQXlCMUMsTUFDM0IsSUE0RUF4RSxFQUFjb0MsaUJBQWlCLFNBQVMsS0FDdENnRixFQUFxQjVDLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gRm9ybSBWYWxpZGF0aW9uIFNldHRpbmdzXHJcbmV4cG9ydCBjb25zdCBmb3JtVmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbn07XHJcblxyXG4vLyBJbml0aWFsIENhcmRzXHJcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuLy8gRWxlbWVudCBTZWxlY3RvcnNcclxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcclxuICBwcm9maWxlRWRpdEZvcm06IGRvY3VtZW50LmZvcm1zW1wicHJvZmlsZS1mb3JtXCJdLFxyXG4gIGFkZENhcmRGb3JtOiBkb2N1bWVudC5mb3Jtc1tcImNhcmQtZm9ybVwiXSxcclxuICBwcm9maWxlRWRpdEJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpLFxyXG4gIGFkZENhcmRCdXR0b246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtYnV0dG9uXCIpLFxyXG4gIHByb2ZpbGVFZGl0UG9wdXA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LXBvcHVwXCIpLFxyXG4gIGFkZENhcmRQb3B1cDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1wb3B1cFwiKSxcclxuICBwaWN0dXJlUG9wdXA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGljdHVyZS1wb3B1cFwiKSxcclxuICBwcm9maWxlVGl0bGU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIiksXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpLFxyXG4gIHByb2ZpbGVUaXRsZUlucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIiksXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiKSxcclxuICBjYXJkTGlzdEVsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpLFxyXG4gIGFkZENhcmRUaXRsZUlucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLXRpdGxlXCIpLFxyXG4gIGFkZENhcmRVcmxJbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC11cmxcIiksXHJcbn07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluayB9LCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICB9XHJcblxyXG4gIF9jcmVhdGVDYXJkRWxlbWVudCgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGNhcmRFbGVtZW50O1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl90cmFzaEJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2gtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl90cmFzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKClcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fbGluaywgdGhpcy5fbmFtZSlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY3JlYXRlQ2FyZEVsZW1lbnQoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIC8vIENvbnN0cnVjdG9yIGluaXRpYWxpemVzIHRoZSBjbGFzcyB3aXRoIHZhbGlkYXRpb24gc2V0dGluZ3MgYW5kIHRoZSBmb3JtIGVsZW1lbnQgdG8gYmUgdmFsaWRhdGVkXHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzOyAvLyBPYmplY3QgY29udGFpbmluZyB2YWxpZGF0aW9uIHNldHRpbmdzIChzZWxlY3RvcnMsIGNsYXNzZXMpXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50OyAvLyBUaGUgZm9ybSBlbGVtZW50IHRoYXQgd2lsbCBiZSB2YWxpZGF0ZWRcclxuXHJcbiAgICAvLyBDcmVhdGUgYW4gYXJyYXkgb2YgYWxsIGlucHV0IGVsZW1lbnRzIGluc2lkZSB0aGUgZm9ybVxyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBTZWxlY3QgdGhlIHN1Ym1pdCBidXR0b24gaW5zaWRlIHRoZSBmb3JtXHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vIFByaXZhdGUgbWV0aG9kIHRvIGNoZWNrIGlmIGFueSBpbnB1dCBmaWVsZCBpcyBpbnZhbGlkXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIC8vIFVzZSB0aGUgJ3NvbWUnIGFycmF5IG1ldGhvZCB0byBjaGVjayBpZiBhbnkgaW5wdXQgZmllbGQgaXMgaW52YWxpZFxyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgLy8gUHJpdmF0ZSBtZXRob2QgdG8gZW5hYmxlIG9yIGRpc2FibGUgdGhlIHN1Ym1pdCBidXR0b24gYmFzZWQgb24gZm9ybSB2YWxpZGl0eVxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIC8vIElmIGFueSBpbnB1dCBpcyBpbnZhbGlkLCBkaXNhYmxlIHRoZSBzdWJtaXQgYnV0dG9uLCBvdGhlcndpc2UgZW5hYmxlIGl0XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7IC8vIERpc2FibGUgdGhlIGJ1dHRvbiBpZiB0aGVyZSBpcyBhbiBpbnZhbGlkIGlucHV0XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBFbmFibGUgdGhlIGJ1dHRvbiBieSByZW1vdmluZyB0aGUgaW5hY3RpdmUgY2xhc3MgYW5kIHNldHRpbmcgdGhlIGRpc2FibGVkIHByb3BlcnR5IHRvIGZhbHNlXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFByaXZhdGUgbWV0aG9kIHRvIGNoZWNrIHRoZSB2YWxpZGl0eSBvZiBhIHNwZWNpZmljIGlucHV0IGVsZW1lbnQgYW5kIHNob3cvaGlkZSBlcnJvciBtZXNzYWdlc1xyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAvLyBTZWxlY3QgdGhlIGVycm9yIG1lc3NhZ2UgZWxlbWVudCBhc3NvY2lhdGVkIHdpdGggdGhlIGlucHV0IGZpZWxkXHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcblxyXG4gICAgLy8gSWYgdGhlIGlucHV0IGlzIGludmFsaWQsIHNob3cgdGhlIGVycm9yIG1lc3NhZ2UgYW5kIGFwcGx5IHRoZSBlcnJvciBjbGFzc1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTsgLy8gQWRkIGVycm9yIGNsYXNzIHRvIHRoZSBpbnB1dFxyXG4gICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7IC8vIERpc3BsYXkgdGhlIHZhbGlkYXRpb24gZXJyb3IgbWVzc2FnZVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gSWYgdGhlIGlucHV0IGlzIHZhbGlkLCByZW1vdmUgdGhlIGVycm9yIGNsYXNzIGFuZCBjbGVhciB0aGUgZXJyb3IgbWVzc2FnZVxyXG4gICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpOyAvLyBSZW1vdmUgZXJyb3IgY2xhc3NcclxuICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjsgLy8gQ2xlYXIgdGhlIGVycm9yIG1lc3NhZ2VcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFByaXZhdGUgbWV0aG9kIHRvIHNldCB1cCBldmVudCBsaXN0ZW5lcnMgZm9yIGlucHV0IGZpZWxkc1xyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vIEluaXRpYWxseSBjaGVjayB0aGUgYnV0dG9uIHN0YXRlIHRvIG1ha2Ugc3VyZSBpdCByZWZsZWN0cyB0aGUgZm9ybSdzIGN1cnJlbnQgc3RhdGVcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgLy8gQWRkIGFuICdpbnB1dCcgZXZlbnQgbGlzdGVuZXIgdG8gZWFjaCBpbnB1dCBmaWVsZCB0byB2YWxpZGF0ZSB0aGUgaW5wdXQgaW4gcmVhbC10aW1lXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpOyAvLyBDaGVjayB0aGUgdmFsaWRpdHkgb2YgdGhlIGlucHV0IGZpZWxkXHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTsgLy8gVXBkYXRlIHRoZSBidXR0b24gc3RhdGUgYmFzZWQgb24gdGhlIGN1cnJlbnQgaW5wdXQgdmFsaWRpdHlcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIFB1YmxpYyBtZXRob2QgdG8gZW5hYmxlIGZvcm0gdmFsaWRhdGlvbiBieSBzZXR0aW5nIGV2ZW50IGxpc3RlbmVyc1xyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpOyAvLyBTZXQgdXAgZXZlbnQgbGlzdGVuZXJzIGZvciBpbnB1dCBmaWVsZHMgYW5kIGZvcm0gdmFsaWRhdGlvblxyXG4gIH1cclxuXHJcbiAgLy8gUHVibGljIG1ldGhvZCB0byByZXNldCBmb3JtIHZhbGlkYXRpb24gKGNsZWFyIGVycm9ycyBhbmQgcmVzZXQgYnV0dG9uIHN0YXRlKVxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIC8vIENsZWFyIHZhbGlkYXRpb24gZXJyb3JzIGZvciBhbGwgaW5wdXRzXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICAgICk7XHJcbiAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7IC8vIFJlbW92ZSBlcnJvciBjbGFzc1xyXG4gICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiOyAvLyBDbGVhciB0aGUgZXJyb3IgbWVzc2FnZVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gUmVzZXQgdGhlIHN1Ym1pdCBidXR0b24ncyBzdGF0ZVxyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTsgLy8gRW5zdXJlIHRoZSBidXR0b24gcmVmbGVjdHMgdGhlIGN1cnJlbnQgZm9ybSB2YWxpZGl0eVxyXG4gIH1cclxuXHJcbiAgLy8gUHVibGljIG1ldGhvZCB0byBkaXNhYmxlIHRoZSBzdWJtaXQgYnV0dG9uXHJcbiAgZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIC8vIEFkZCB0aGUgaW5hY3RpdmUgY2xhc3MgYW5kIHNldCB0aGUgZGlzYWJsZWQgcHJvcGVydHkgdG8gdHJ1ZVxyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTsgLy8gQmluZCB0aGUgY29udGV4dCBvZiBfaGFuZGxlRXNjQ2xvc2VcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7IC8vIENsb3NlIHRoZSBwb3B1cCBpZiBFU0MgaXMgcHJlc3NlZFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gdGhpcy5fcG9wdXBFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpOyAvLyBDbG9zZSB0aGUgcG9wdXAgaWYgY2xpY2tlZCBvbiBvdmVybGF5XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7IC8vIENhbGwgdGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBwYXJlbnQgY2xhc3MgKFBvcHVwKVxyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIilcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9OyAvLyBJbml0aWFsaXplIGFuIGVtcHR5IG9iamVjdCB0byBob2xkIGZvcm0gZGF0YVxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlczsgLy8gUmV0dXJuIHRoZSBvYmplY3QgY29udGFpbmluZyBhbGwgaW5wdXQgdmFsdWVzXHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7IC8vIENhbGwgdGhlIHBhcmVudCBjbGFzcyBtZXRob2QgdG8gaGFuZGxlIHBvcHVwIGxpc3RlbmVyc1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50IHRoZSBkZWZhdWx0IGZvcm0gc3VibWlzc2lvbiBiZWhhdmlvclxyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpOyAvLyBDYWxsIHRoZSBmb3JtIHN1Ym1pdCBoYW5kbGVyIGZ1bmN0aW9uXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7IC8vIFJlc2V0IHRoZSBmb3JtIGFmdGVyIHN1Ym1pc3Npb25cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCIvLyBJbXBvcnRzIG1vZHVsZXMgYW5kIGNsYXNzZXNcclxuaW1wb3J0IHtcclxuICBmb3JtVmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIGluaXRpYWxDYXJkcyxcclxuICBzZWxlY3RvcnMsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcblxyXG4vLyBEZXN0cnVjdHVyZWQgc2VsZWN0b3JzIGZyb20gdGhlIGNvbnN0YW50cyBmaWxlXHJcbmNvbnN0IHtcclxuICBwcm9maWxlRWRpdEZvcm0sXHJcbiAgYWRkQ2FyZEZvcm0sXHJcbiAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgYWRkQ2FyZEJ1dHRvbixcclxuICBwcm9maWxlVGl0bGVJbnB1dCxcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCxcclxuICBjYXJkTGlzdEVsLFxyXG59ID0gc2VsZWN0b3JzO1xyXG5cclxuLy8gSW5pdGlhbGl6ZSBVc2VySW5mbyB0byBtYW5hZ2UgYW5kIHVwZGF0ZSBwcm9maWxlIGRhdGEgKG5hbWUgYW5kIGRlc2NyaXB0aW9uKVxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gIGRlc2NyaXB0aW9uU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbn0pO1xyXG5cclxuLy8gRnVuY3Rpb24gdG8gb3BlbiB0aGUgcHJvZmlsZSBlZGl0IHBvcHVwIHdpdGggY3VycmVudCB1c2VyIGRhdGFcclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXQoKSB7XHJcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpOyAvLyBHZXQgY3VycmVudCBwcm9maWxlIGRhdGEgKG5hbWUsIGRlc2NyaXB0aW9uKVxyXG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gdXNlckRhdGEubmFtZTsgLy8gUHJlLWZpbGwgdGhlIGZvcm0gd2l0aCB0aGUgY3VycmVudCBuYW1lXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5kZXNjcmlwdGlvbjsgLy8gUHJlLWZpbGwgdGhlIGZvcm0gd2l0aCB0aGUgY3VycmVudCBkZXNjcmlwdGlvblxyXG5cclxuICBwcm9maWxlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTsgLy8gUmVzZXQgdmFsaWRhdGlvbiBzdGF0ZSBmb3IgdGhlIGZvcm1cclxuICBwcm9maWxlRWRpdFBvcHVwSW5zdGFuY2Uub3BlbigpOyAvLyBPcGVuIHRoZSBwb3B1cFxyXG59XHJcblxyXG4vLyBGdW5jdGlvbiB0byBvcGVuIHRoZSBpbWFnZSBwb3B1cCB3aXRoIHRoZSBwcm92aWRlZCBpbWFnZSBsaW5rIGFuZCBuYW1lXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlUG9wdXAobGluaywgbmFtZSkge1xyXG4gIHBpY3R1cmVQb3B1cEluc3RhbmNlLm9wZW4oeyBuYW1lLCBsaW5rIH0pOyAvLyBQYXNzIHRoZSBpbWFnZSBkYXRhIHRvIHRoZSBwb3B1cCBpbnN0YW5jZVxyXG59XHJcblxyXG4vLyBGdW5jdGlvbiB0byBjcmVhdGUgYSBuZXcgY2FyZCB1c2luZyB0aGUgQ2FyZCBjbGFzc1xyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmREYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlUG9wdXApO1xyXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTsgLy8gUmV0dXJuIHRoZSBjYXJkIGVsZW1lbnQgZm9yIHJlbmRlcmluZ1xyXG59XHJcblxyXG4vLyBJbml0aWFsaXplIHRoZSBTZWN0aW9uIGNsYXNzIHRvIHJlbmRlciBhbmQgbWFuYWdlIHRoZSBjYXJkIGxpc3RcclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLCAvLyBBcnJheSBvZiBpbml0aWFsIGNhcmRzIHRvIHJlbmRlclxyXG4gICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpOyAvLyBDcmVhdGUgdGhlIGNhcmQgYW5kIGdldCB0aGUgcmVuZGVyZWQgY2FyZCBlbGVtZW50XHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIFwiLmNhcmRzX19saXN0XCJcclxuKTtcclxuXHJcbi8vIEluaXRpYWxpemUgdGhlIHByb2ZpbGUgZWRpdCBwb3B1cCB3aXRoIGZvcm0gaGFuZGxpbmdcclxuY29uc3QgcHJvZmlsZUVkaXRQb3B1cEluc3RhbmNlID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjcHJvZmlsZS1lZGl0LXBvcHVwXCIsXHJcbiAgKGZvcm1EYXRhKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgIG5hbWU6IGZvcm1EYXRhLm5hbWUsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiBmb3JtRGF0YS5kZXNjcmlwdGlvbixcclxuICAgIH0pO1xyXG4gICAgcHJvZmlsZUVkaXRQb3B1cEluc3RhbmNlLmNsb3NlKCk7IC8vIENsb3NlIHRoZSBwb3B1cCBhZnRlciBzdWJtaXNzaW9uXHJcbiAgfVxyXG4pO1xyXG5wcm9maWxlRWRpdFBvcHVwSW5zdGFuY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy8gU2V0IHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgdGhlIHBvcHVwXHJcblxyXG4vLyBJbml0aWFsaXplIHRoZSBhZGQgY2FyZCBwb3B1cCB3aXRoIGZvcm0gaGFuZGxpbmdcclxuY29uc3QgYWRkQ2FyZFBvcHVwSW5zdGFuY2UgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNhZGQtY2FyZC1wb3B1cFwiLFxyXG4gIChmb3JtRGF0YSkgPT4ge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKHtcclxuICAgICAgbmFtZTogZm9ybURhdGEudGl0bGUsIC8vIFRpdGxlIGlucHV0IGZyb20gdGhlIGZvcm1cclxuICAgICAgbGluazogZm9ybURhdGEudXJsLCAvLyBVUkwgaW5wdXQgZnJvbSB0aGUgZm9ybVxyXG4gICAgfSk7XHJcbiAgICBjYXJkRm9ybVZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTsgLy8gQWRkIHRoZSBuZXcgY2FyZCB0byB0aGUgY2FyZCBzZWN0aW9uXHJcbiAgICBhZGRDYXJkUG9wdXBJbnN0YW5jZS5jbG9zZSgpOyAvLyBDbG9zZSB0aGUgcG9wdXAgYWZ0ZXIgc3VibWlzc2lvblxyXG4gIH1cclxuKTtcclxuYWRkQ2FyZFBvcHVwSW5zdGFuY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy8gU2V0IHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgdGhlIHBvcHVwXHJcblxyXG4vLyBJbml0aWFsaXplIHRoZSBpbWFnZSBwb3B1cCBmb3IgZGlzcGxheWluZyBsYXJnZXIgaW1hZ2VzXHJcbmNvbnN0IHBpY3R1cmVQb3B1cEluc3RhbmNlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3BpY3R1cmUtcG9wdXBcIik7XHJcbnBpY3R1cmVQb3B1cEluc3RhbmNlLnNldEV2ZW50TGlzdGVuZXJzKCk7IC8vIFNldCB1cCBldmVudCBsaXN0ZW5lcnMgZm9yIHRoZSBwb3B1cFxyXG5cclxuLy8gSW5pdGlhbGl6ZSBmb3JtIHZhbGlkYXRvcnMgZm9yIHRoZSBwcm9maWxlIGFuZCBjYXJkIGZvcm1zXHJcbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgZm9ybVZhbGlkYXRpb25TZXR0aW5ncyxcclxuICBwcm9maWxlRWRpdEZvcm1cclxuKTtcclxuY29uc3QgY2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBmb3JtVmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIGFkZENhcmRGb3JtXHJcbik7XHJcblxyXG4vLyBFbmFibGUgZm9ybSB2YWxpZGF0aW9uIGZvciBib3RoIGZvcm1zXHJcbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuY2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy8gUmVuZGVyIHRoZSBpbml0aWFsIGNhcmRzIHdoZW4gdGhlIHBhZ2UgbG9hZHNcclxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTsgLy8gVGhlIFNlY3Rpb24gY2xhc3MgbWFuYWdlcyBjYXJkIGluc2VydGlvbiBpbnRvIHRoZSBET01cclxuXHJcbi8vIFNldCB1cCBldmVudCBsaXN0ZW5lcnMgZm9yIHRoZSBwcm9maWxlIGVkaXQgYW5kIGFkZCBjYXJkIGJ1dHRvbnNcclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZVByb2ZpbGVFZGl0KTtcclxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZENhcmRQb3B1cEluc3RhbmNlLm9wZW4oKTsgLy8gT3BlbiB0aGUgYWRkIGNhcmQgcG9wdXAgd2hlbiB0aGUgYnV0dG9uIGlzIGNsaWNrZWRcclxufSk7XHJcblxyXG4vLyBqdXN0ICBzb21lIHNtYWxsIGFsdGVyYXRpb25cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIC8vIENvbnN0cnVjdG9yIGluaXRpYWxpemVzIHRoZSBjbGFzcyB3aXRoIHRoZSBzZWxlY3RvcnMgZm9yIHRoZSBuYW1lIGFuZCBkZXNjcmlwdGlvbiBlbGVtZW50c1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBkZXNjcmlwdGlvblNlbGVjdG9yIH0pIHtcclxuICAgIC8vIEdldCB0aGUgRE9NIGVsZW1lbnQgZm9yIHRoZSB1c2VyJ3MgbmFtZSBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgc2VsZWN0b3JcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG5cclxuICAgIC8vIEdldCB0aGUgRE9NIGVsZW1lbnQgZm9yIHRoZSB1c2VyJ3MgZGVzY3JpcHRpb24gYmFzZWQgb24gdGhlIHByb3ZpZGVkIHNlbGVjdG9yXHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGRlc2NyaXB0aW9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgLy8gTWV0aG9kIHRvIGdldCB0aGUgY3VycmVudCB1c2VyIGluZm9ybWF0aW9uIChuYW1lIGFuZCBkZXNjcmlwdGlvbikgZnJvbSB0aGUgRE9NXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAvLyBSZXR1cm4gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGN1cnJlbnQgbmFtZSBhbmQgZGVzY3JpcHRpb24gdGV4dCBmcm9tIHRoZSBET00gZWxlbWVudHNcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LCAvLyBHZXQgdGhlIG5hbWUgZnJvbSB0aGUgRE9NIGVsZW1lbnRcclxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCwgLy8gR2V0IHRoZSBkZXNjcmlwdGlvbiBmcm9tIHRoZSBET00gZWxlbWVudFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vIE1ldGhvZCB0byB1cGRhdGUgdGhlIHVzZXIncyBpbmZvcm1hdGlvbiBpbiB0aGUgRE9NXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSB7XHJcbiAgICAvLyBVcGRhdGUgdGhlIERPTSBlbGVtZW50IHdpdGggdGhlIG5ldyBuYW1lXHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcblxyXG4gICAgLy8gVXBkYXRlIHRoZSBET00gZWxlbWVudCB3aXRoIHRoZSBuZXcgZGVzY3JpcHRpb25cclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTsgLy8gUmVuZGVyIGVhY2ggaXRlbSBhbmQgYWRkIGl0IHRvIHRoZSBjb250YWluZXIgdmlhIHRoZSByZW5kZXJlclxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKHJlbmRlcmVkSXRlbSkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQocmVuZGVyZWRJdGVtKTsgLy8gQWRkIHRoZSByZW5kZXJlZCBpdGVtIHRvIHRoZSB0b3Agb2YgdGhlIGNvbnRhaW5lclxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FwdGlvbkVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FwdGlvblwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSBsaW5rOyAvLyBTZXQgdGhlIGltYWdlIFVSTFxyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LmFsdCA9IG5hbWU7IC8vIFNldCB0aGUgaW1hZ2UgYWx0IHRleHRcclxuICAgIHRoaXMuX2NhcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTsgLy8gU2V0IHRoZSBjYXB0aW9uIHRleHRcclxuICAgIHN1cGVyLm9wZW4oKTsgLy8gT3BlbiB0aGUgcG9wdXBcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImZvcm1WYWxpZGF0aW9uU2V0dGluZ3MiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwic2VsZWN0b3JzIiwicHJvZmlsZUVkaXRGb3JtIiwiZG9jdW1lbnQiLCJmb3JtcyIsImFkZENhcmRGb3JtIiwicHJvZmlsZUVkaXRCdXR0b24iLCJxdWVyeVNlbGVjdG9yIiwiYWRkQ2FyZEJ1dHRvbiIsInByb2ZpbGVFZGl0UG9wdXAiLCJhZGRDYXJkUG9wdXAiLCJwaWN0dXJlUG9wdXAiLCJwcm9maWxlVGl0bGUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwiY2FyZExpc3RFbCIsImFkZENhcmRUaXRsZUlucHV0IiwiYWRkQ2FyZFVybElucHV0IiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJuYW1lIiwibGluayIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2NyZWF0ZUNhcmRFbGVtZW50IiwiY2FyZEVsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRFbGVtZW50IiwiX2xpa2VCdXR0b24iLCJfdHJhc2hCdXR0b24iLCJfY2FyZEltYWdlRWwiLCJfY2FyZFRpdGxlRWwiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJnZXRWaWV3IiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfc2V0dGluZ3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJfaGFzSW52YWxpZElucHV0Iiwic29tZSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJkaXNhYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImZvckVhY2giLCJlbmFibGVWYWxpZGF0aW9uIiwicmVzZXRWYWxpZGF0aW9uIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0IiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJkZXNjcmlwdGlvblNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2Rlc2NyaXB0aW9uRWxlbWVudCIsImdldFVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJzZXRVc2VySW5mbyIsIl9yZWYyIiwiaGFuZGxlSW1hZ2VQb3B1cCIsInBpY3R1cmVQb3B1cEluc3RhbmNlIiwiY3JlYXRlQ2FyZCIsImNhcmREYXRhIiwiY2FyZFNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsInJlbmRlcmVkSXRlbSIsInByZXBlbmQiLCJwcm9maWxlRWRpdFBvcHVwSW5zdGFuY2UiLCJmb3JtRGF0YSIsImFkZENhcmRQb3B1cEluc3RhbmNlIiwidGl0bGUiLCJ1cmwiLCJjYXJkRm9ybVZhbGlkYXRvciIsIl9pbWFnZUVsZW1lbnQiLCJfY2FwdGlvbkVsZW1lbnQiLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsInVzZXJEYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==
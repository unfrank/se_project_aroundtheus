!function(){"use strict";const e={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error"},t={profileEditForm:document.forms["profile-form"],addCardForm:document.forms["card-form"],profileEditButton:document.querySelector("#profile-edit-button"),addCardButton:document.querySelector("#profile-add-button"),profileEditPopup:document.querySelector("#profile-edit-popup"),addCardPopup:document.querySelector("#add-card-popup"),picturePopup:document.querySelector("#picture-popup"),profileTitle:document.querySelector(".profile__title"),profileDescription:document.querySelector(".profile__description"),profileTitleInput:document.querySelector("#profile-title-input"),profileDescriptionInput:document.querySelector("#profile-description-input"),cardListEl:document.querySelector(".cards__list"),addCardTitleInput:document.querySelector("#add-card-title"),addCardUrlInput:document.querySelector("#add-card-url"),avatarEditForm:document.querySelector("#edit-avatar-form")};class r{constructor(e,t,r,s,i,n){let{name:o,link:a,_id:c,isLiked:l,likes:d=[],owner:h}=e;this._name=o,this._link=a,this._id=c,this._isLiked=l,this._likes=d,this._owner=h,this._currentUserId=s,this._cardSelector=t,this._handleImageClick=r,this._api=i,this._handleDeleteCard=n}_setLikeState(){this._isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}_toggleLike(){this._isLiked?this._api.dislikeCard(this._id).then((e=>{this._isLiked=e.isLiked,this._setLikeState()})).catch((e=>console.error(`Error unliking card: ${e}`))):this._api.likeCard(this._id).then((e=>{this._isLiked=e.isLiked,this._setLikeState()})).catch((e=>console.error(`Error liking card: ${e}`)))}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._toggleLike()})),this._owner===this._currentUserId&&this._trashButton.addEventListener("click",(()=>this._handleDeleteCard(this._cardElement,this._id))),this._cardImageEl.addEventListener("click",(()=>this._handleImageClick(this._link,this._name)))}getView(){return this._createCardElement(),this._setEventListeners(),this._cardElement}_createCardElement(){const e=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0);return this._cardElement=e,this._likeButton=this._cardElement.querySelector(".card__like-button"),this._trashButton=this._cardElement.querySelector(".card__trash-button"),this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._cardTitleEl.textContent=this._name,this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._setLikeState(),this._cardElement}}class s{constructor(e,t){this._settings=e,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._submitButton=this._formElement.querySelector(this._settings.submitButtonSelector)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():(this._submitButton.classList.remove(this._settings.inactiveButtonClass),this._submitButton.disabled=!1)}_checkInputValidity(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.validity.valid?(e.classList.remove(this._settings.inputErrorClass),t.textContent=""):(e.classList.add(this._settings.inputErrorClass),t.textContent=e.validationMessage)}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._setEventListeners()}resetValidation(){this._inputList.forEach((e=>{const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._settings.inputErrorClass),t.textContent=""})),this._toggleButtonState()}disableButton(){this._submitButton.classList.add(this._settings.inactiveButtonClass),this._submitButton.disabled=!0}}class i{constructor(e){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.querySelector(".popup__close").addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("mousedown",(e=>{e.target===this._popupElement&&this.close()}))}}class n extends i{constructor(e,t){super(e),this._handleFormSubmit=t,this._formElement=this._popupElement.querySelector(".popup__form"),this._inputList=Array.from(this._formElement.querySelectorAll(".popup__input"))}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._formElement.reset()}))}}const o=new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}_handleError(e){return console.error(e),Promise.reject(e)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>(console.error("API error:",e),Promise.reject(e))))}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResponse).catch(this._handleError)}updateUserInfo(e){let{name:t,about:r}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})}).then(this._checkResponse).catch(this._handleError)}addCard(e){let{name:t,link:r}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})}).then(this._checkResponse).catch(this._handleError)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse).catch(this._handleError)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse).catch(this._handleError)}dislikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse).catch(this._handleError)}updateAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse).catch(this._handleError)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"765a56ab-1403-4444-8fac-5fc1871e9695","Content-Type":"application/json"}}),{profileEditForm:a,addCardForm:c,profileEditButton:l,addCardButton:d,profileTitleInput:h,profileDescriptionInput:u,avatarEditForm:_}=t,p=document.querySelector("#profile-edit-popup .popup__button"),m=document.querySelector("#add-card-popup .popup__button"),E=document.querySelector("#avatar-edit-popup .popup__button"),v=document.querySelector("#edit-avatar-button"),f=new class{constructor(e){let{nameSelector:t,descriptionSelector:r,avatarSelector:s}=e;this._nameElement=document.querySelector(t),this._descriptionElement=document.querySelector(r),this._avatarElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,description:this._descriptionElement.textContent,avatar:this._avatarElement.src}}setUserInfo(e){let{name:t,description:r,avatar:s}=e;this._nameElement.textContent=t,this._descriptionElement.textContent=r,s&&(this._avatarElement.src=s)}}({nameSelector:".profile__title",descriptionSelector:".profile__description",avatarSelector:".profile__image"}),k=new i("#delete-card-popup");k.setEventListeners();const S=(e,t)=>{let r=document.querySelector("#confirm-delete-button");r.replaceWith(r.cloneNode(!0)),r=document.querySelector("#confirm-delete-button");const s=()=>{o.deleteCard(t).then((()=>{e.remove(),k.close()})).catch((e=>console.error(`Error deleting card: ${e}`)))};r.addEventListener("click",s,{once:!0}),k.open(),document.querySelector(".popup__close").addEventListener("click",(()=>{k.close(),r.removeEventListener("click",s)}))},L=e=>new r({name:e.name,link:e.link,_id:e._id,owner:e.owner,isLiked:e.isLiked},"#card-template",b,g,o,S).getView(),y=new class{constructor(e,t){let{renderer:r}=e;this._renderer=r,this._container=document.querySelector(t)}renderItems(e){e.forEach((e=>this._renderer(e)))}addItem(e){this._container.prepend(e)}}({renderer:e=>{const t=L(e);y.addItem(t)}},".cards__list");let g;o.getUserInfo().then((e=>(f.setUserInfo({name:e.name,description:e.about,avatar:e.avatar}),g=e._id,o.getInitialCards()))).then((e=>{e.forEach((e=>{const t=L({name:e.name,link:e.link,_id:e._id,owner:e.owner,isLiked:e.isLiked});y.addItem(t)}))})).catch((e=>console.error("Error fetching user info or cards:",e)));const b=(e,t)=>{w.open({name:t,link:e})},C=new n("#profile-edit-popup",(e=>{p.textContent="Saving...",o.updateUserInfo({name:e.name,about:e.description}).then((e=>{f.setUserInfo({name:e.name,description:e.about,avatar:e.avatar}),C.close()})).catch((e=>{console.error("Error updating profile:",e)})).finally((()=>{p.textContent="Save"}))}));C.setEventListeners();const q=new n("#add-card-popup",(e=>{m.textContent="Saving...",o.addCard({name:e.title,link:e.url}).then((e=>{const t=L({name:e.name,link:e.link,_id:e._id,owner:e.owner,likes:e.likes});y.addItem(t),q._formElement.reset(),q.close(),m.textContent="Save"})).catch((e=>console.error("Error adding card:",e)))}));q.setEventListeners();const I=new n("#avatar-edit-popup",(e=>{E.textContent="Saving...",$._hasInvalidInput()||o.updateAvatar(e.avatar).then((e=>{document.querySelector(".profile__image").src=e.avatar,I.close()})).catch((e=>console.error("Error updating avatar:",e))).finally((()=>{E.textContent="Save"}))}));I.setEventListeners(),v.addEventListener("click",(()=>{I.open()}));const w=new class extends i{constructor(e){super(e),this._imageElement=this._popupElement.querySelector(".popup__image"),this._captionElement=this._popupElement.querySelector(".popup__caption")}open(e){let{name:t,link:r}=e;this._imageElement.src=r,this._imageElement.alt=t,this._captionElement.textContent=t,super.open()}}("#picture-popup");w.setEventListeners();const B=new s(e,a),U=new s(e,c),$=new s(e,_);B.enableValidation(),U.enableValidation(),$.enableValidation(),l.addEventListener("click",(()=>{const e=f.getUserInfo();h.value=e.name,u.value=e.description,B.resetValidation(),C.open()})),d.addEventListener("click",(()=>{q.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTZCdEYsRUFFMUM3RSxXQUFBQSxDQUFZOEUsR0FFVmEsTUFBTWIsR0FHTmpFLEtBQUtpSyxjQUFnQmpLLEtBQUtrRSxjQUFjN0YsY0FBYyxpQkFHdEQyQixLQUFLa0ssZ0JBQWtCbEssS0FBS2tFLGNBQWM3RixjQUFjLGtCQUMxRCxDQUdBZ0csSUFBQUEsQ0FBSWpGLEdBQWlCLElBQWhCLEtBQUVNLEVBQUksS0FBRUMsR0FBTVAsRUFFakJZLEtBQUtpSyxjQUFjNUgsSUFBTTFDLEVBR3pCSyxLQUFLaUssY0FBYzNILElBQU01QyxFQUd6Qk0sS0FBS2tLLGdCQUFnQjlILFlBQWMxQyxFQUduQ29GLE1BQU1ULE1BQ1IsR0o4TjhDLGtCQUNoRGlGLEVBQXFCNUUsb0JBR3JCLE1BQU15RixFQUF1QixJQUFJNUgsRUFDL0I3RSxFQUNBTSxHQUVJb00sRUFBb0IsSUFBSTdILEVBQzVCN0UsRUFDQVMsR0FFSTZMLEVBQXNCLElBQUl6SCxFQUM5QjdFLEVBQ0F1QixHQUlGa0wsRUFBcUJyRyxtQkFDckJzRyxFQUFrQnRHLG1CQUNsQmtHLEVBQW9CbEcsbUJBR3BCMUYsRUFBa0JzRCxpQkFBaUIsU0E5SFQySSxLQUN4QixNQUFNQyxFQUFXOUMsRUFBaUJwQixjQUNsQ3hILEVBQWtCdUcsTUFBUW1GLEVBQVM1SyxLQUNuQ2IsRUFBd0JzRyxNQUFRbUYsRUFBU3ZDLFlBQ3pDb0MsRUFBcUJwRyxrQkFDckJ3RixFQUF5QmxGLE1BQU0sSUEwSGpDL0YsRUFBY29ELGlCQUFpQixTQUFTLEtBQ3RDaUksRUFBcUJ0RixNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBGb3JtIFZhbGlkYXRpb24gU2V0dGluZ3NcclxuZXhwb3J0IGNvbnN0IGZvcm1WYWxpZGF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxufTtcclxuXHJcbi8vIEluaXRpYWwgQ2FyZHNcclxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG4vLyBFbGVtZW50IFNlbGVjdG9yc1xyXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xyXG4gIHByb2ZpbGVFZGl0Rm9ybTogZG9jdW1lbnQuZm9ybXNbXCJwcm9maWxlLWZvcm1cIl0sXHJcbiAgYWRkQ2FyZEZvcm06IGRvY3VtZW50LmZvcm1zW1wiY2FyZC1mb3JtXCJdLFxyXG4gIHByb2ZpbGVFZGl0QnV0dG9uOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIiksXHJcbiAgYWRkQ2FyZEJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1idXR0b25cIiksXHJcbiAgcHJvZmlsZUVkaXRQb3B1cDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtcG9wdXBcIiksXHJcbiAgYWRkQ2FyZFBvcHVwOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLXBvcHVwXCIpLFxyXG4gIHBpY3R1cmVQb3B1cDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwaWN0dXJlLXBvcHVwXCIpLFxyXG4gIHByb2ZpbGVUaXRsZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKSxcclxuICBwcm9maWxlRGVzY3JpcHRpb246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIiksXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKSxcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCIpLFxyXG4gIGNhcmRMaXN0RWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIiksXHJcbiAgYWRkQ2FyZFRpdGxlSW5wdXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtdGl0bGVcIiksXHJcbiAgYWRkQ2FyZFVybElucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLXVybFwiKSxcclxuICBhdmF0YXJFZGl0Rm9ybTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LWF2YXRhci1mb3JtXCIpLFxyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICAvLyBDb25zdHJ1Y3RvciBpbml0aWFsaXplcyB0aGUgY2FyZCBvYmplY3Qgd2l0aCBpdHMgcHJvcGVydGllcyBhbmQgaGFuZGxlcyBwYXNzZWQgYXMgYXJndW1lbnRzXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICB7IG5hbWUsIGxpbmssIF9pZCwgaXNMaWtlZCwgbGlrZXMgPSBbXSwgb3duZXIgfSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBjdXJyZW50VXNlcklkLFxyXG4gICAgYXBpLFxyXG4gICAgaGFuZGxlRGVsZXRlQ2FyZFxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7IC8vIENhcmQncyBuYW1lL3RpdGxlXHJcbiAgICB0aGlzLl9saW5rID0gbGluazsgLy8gVVJMIHRvIHRoZSBjYXJkJ3MgaW1hZ2VcclxuICAgIHRoaXMuX2lkID0gX2lkOyAvLyBVbmlxdWUgSUQgb2YgdGhlIGNhcmRcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBpc0xpa2VkOyAvLyBXaGV0aGVyIHRoZSBjdXJyZW50IHVzZXIgaGFzIGxpa2VkIHRoZSBjYXJkXHJcbiAgICB0aGlzLl9saWtlcyA9IGxpa2VzOyAvLyBBcnJheSBvZiB1c2VycyB3aG8gaGF2ZSBsaWtlZCB0aGUgY2FyZFxyXG4gICAgdGhpcy5fb3duZXIgPSBvd25lcjsgLy8gSUQgb2YgdGhlIHVzZXIgd2hvIG93bnMgdGhlIGNhcmRcclxuICAgIHRoaXMuX2N1cnJlbnRVc2VySWQgPSBjdXJyZW50VXNlcklkOyAvLyBJRCBvZiB0aGUgY3VycmVudCB1c2VyICh0byBjaGVjayBvd25lcnNoaXApXHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7IC8vIFRlbXBsYXRlIHNlbGVjdG9yIGZvciBjcmVhdGluZyB0aGUgY2FyZFxyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7IC8vIEZ1bmN0aW9uIHRvIGhhbmRsZSBpbWFnZSBjbGljayBldmVudHMgKGZvciBvcGVuaW5nIGEgbGFyZ2VyIGltYWdlKVxyXG4gICAgdGhpcy5fYXBpID0gYXBpOyAvLyBSZWZlcmVuY2UgdG8gdGhlIEFQSSBjbGFzcyB0byBtYWtlIGxpa2UvdW5saWtlIHJlcXVlc3RzXHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkID0gaGFuZGxlRGVsZXRlQ2FyZDsgLy8gRnVuY3Rpb24gdG8gaGFuZGxlIGNhcmQgZGVsZXRpb25cclxuICB9XHJcblxyXG4gIC8vIFByaXZhdGUgbWV0aG9kIHRvIHVwZGF0ZSB0aGUgbGlrZSBidXR0b24ncyBzdGF0ZSAoYWN0aXZlIGlmIGxpa2VkKVxyXG4gIF9zZXRMaWtlU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faXNMaWtlZCkge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7IC8vIEFkZHMgdGhlIGFjdGl2ZSBjbGFzcyB0byBmaWxsIHRoZSBoZWFydFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpOyAvLyBSZW1vdmVzIHRoZSBhY3RpdmUgY2xhc3MgdG8gdW5maWxsIHRoZSBoZWFydFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gUHJpdmF0ZSBtZXRob2QgdG8gdG9nZ2xlIGxpa2UvdW5saWtlIGJlaGF2aW9yXHJcbiAgX3RvZ2dsZUxpa2UoKSB7XHJcbiAgICBpZiAodGhpcy5faXNMaWtlZCkge1xyXG4gICAgICAvLyBJZiBjYXJkIGlzIGxpa2VkLCBzZW5kIHJlcXVlc3QgdG8gdW5saWtlIHRoZSBjYXJkXHJcbiAgICAgIHRoaXMuX2FwaVxyXG4gICAgICAgIC5kaXNsaWtlQ2FyZCh0aGlzLl9pZClcclxuICAgICAgICAudGhlbigodXBkYXRlZENhcmQpID0+IHtcclxuICAgICAgICAgIC8vIHRoaXMuX2lzTGlrZWQgPSBmYWxzZTsgLy8gVXBkYXRlIGxvY2FsIGxpa2Ugc3RhdGVcclxuICAgICAgICAgIHRoaXMuX2lzTGlrZWQgPSB1cGRhdGVkQ2FyZC5pc0xpa2VkOyAvLyBVcGRhdGUgbGlrZXMgYXJyYXlcclxuICAgICAgICAgIHRoaXMuX3NldExpa2VTdGF0ZSgpOyAvLyBSZSByZW5kZXIgbGlrZSBzdGF0ZVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoYEVycm9yIHVubGlraW5nIGNhcmQ6ICR7ZXJyfWApKTsgLy8gSGFuZGxlIGVycm9yc1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gSWYgY2FyZCBpcyBub3QgbGlrZWQsIHNlbmQgcmVxdWVzdCB0byBsaWtlIHRoZSBjYXJkXHJcbiAgICAgIHRoaXMuX2FwaVxyXG4gICAgICAgIC5saWtlQ2FyZCh0aGlzLl9pZClcclxuICAgICAgICAudGhlbigodXBkYXRlZENhcmQpID0+IHtcclxuICAgICAgICAgIHRoaXMuX2lzTGlrZWQgPSB1cGRhdGVkQ2FyZC5pc0xpa2VkOyAvLyBVcGRhdGUgdGhlIGlzTGlrZWQgcHJvcGVydHkgZnJvbSB0aGUgcmVzcG9uc2VcclxuICAgICAgICAgIC8vIHRoaXMuX2xpa2VzID0gdXBkYXRlZENhcmQubGlrZXMgfHwgW107IC8vIFVwZGF0ZSBsaWtlcyBhcnJheVxyXG4gICAgICAgICAgdGhpcy5fc2V0TGlrZVN0YXRlKCk7IC8vIFJlIHJlbmRlciBsaWtlIHN0YXRlXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihgRXJyb3IgbGlraW5nIGNhcmQ6ICR7ZXJyfWApKTsgLy8gSGFuZGxlIGVycm9yc1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gUHJpdmF0ZSBtZXRob2QgdG8gc2V0IHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgY2FyZCBhY3Rpb25zXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gTGlzdGVuIGZvciBsaWtlIGJ1dHRvbiBjbGlja3MgdG8gdG9nZ2xlIGxpa2UvdW5saWtlXHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX3RvZ2dsZUxpa2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIElmIHRoZSBjYXJkIGJlbG9uZ3MgdG8gdGhlIGN1cnJlbnQgdXNlciwgc2V0IHVwIHRoZSBkZWxldGUgYnV0dG9uXHJcbiAgICBpZiAodGhpcy5fb3duZXIgPT09IHRoaXMuX2N1cnJlbnRVc2VySWQpIHtcclxuICAgICAgdGhpcy5fdHJhc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCh0aGlzLl9jYXJkRWxlbWVudCwgdGhpcy5faWQpIC8vIENhbGwgZGVsZXRlIGhhbmRsZXIgd2l0aCBjYXJkIGluZm9cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBMaXN0ZW4gZm9yIGltYWdlIGNsaWNrcyB0byBvcGVuIGEgbGFyZ2VyIHZpZXcgb2YgdGhlIGltYWdlXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBcImNsaWNrXCIsXHJcbiAgICAgICgpID0+IHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fbGluaywgdGhpcy5fbmFtZSkgLy8gQ2FsbCBpbWFnZSBjbGljayBoYW5kbGVyXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gUHVibGljIG1ldGhvZCB0byBjcmVhdGUgdGhlIGNhcmQgdmlldyBhbmQgc2V0IHVwIGV2ZW50IGxpc3RlbmVyc1xyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jcmVhdGVDYXJkRWxlbWVudCgpOyAvLyBDcmVhdGUgdGhlIGNhcmQgZWxlbWVudFxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy8gQXR0YWNoIGV2ZW50IGxpc3RlbmVycyB0byB0aGUgY2FyZFxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50OyAvLyBSZXR1cm4gdGhlIGNyZWF0ZWQgY2FyZCBlbGVtZW50XHJcbiAgfVxyXG5cclxuICAvLyBQcml2YXRlIG1ldGhvZCB0byBjcmVhdGUgYW5kIHJldHVybiB0aGUgY2FyZCBlbGVtZW50IGZyb20gdGhlIHRlbXBsYXRlXHJcbiAgX2NyZWF0ZUNhcmRFbGVtZW50KCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpIC8vIFNlbGVjdCB0aGUgY2FyZCB0ZW1wbGF0ZVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIikgLy8gU2VsZWN0IHRoZSBjYXJkIHN0cnVjdHVyZSBpbnNpZGUgdGhlIHRlbXBsYXRlXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7IC8vIENsb25lIHRoZSBzdHJ1Y3R1cmUgdG8gY3JlYXRlIGEgbmV3IGNhcmRcclxuXHJcbiAgICAvLyBTdG9yZSByZWZlcmVuY2VzIHRvIHZhcmlvdXMgY2FyZCBlbGVtZW50c1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBjYXJkRWxlbWVudDtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fdHJhc2hCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RyYXNoLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuXHJcbiAgICAvLyBTZXQgdGhlIGNhcmQncyB0aXRsZSwgaW1hZ2Ugc291cmNlLCBhbmQgYWx0IHRleHRcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIC8vIFNldCB0aGUgaW5pdGlhbCBsaWtlIHN0YXRlIChhY3RpdmUvaW5hY3RpdmUpXHJcbiAgICB0aGlzLl9zZXRMaWtlU3RhdGUoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7IC8vIFJldHVybiB0aGUgY29uc3RydWN0ZWQgY2FyZCBlbGVtZW50XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIC8vIENvbnN0cnVjdG9yIGluaXRpYWxpemVzIHRoZSBjbGFzcyB3aXRoIHZhbGlkYXRpb24gc2V0dGluZ3MgYW5kIHRoZSBmb3JtIGVsZW1lbnQgdG8gYmUgdmFsaWRhdGVkXHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzOyAvLyBPYmplY3QgY29udGFpbmluZyB2YWxpZGF0aW9uIHNldHRpbmdzIChzZWxlY3RvcnMsIGNsYXNzZXMpXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50OyAvLyBUaGUgZm9ybSBlbGVtZW50IHRoYXQgd2lsbCBiZSB2YWxpZGF0ZWRcclxuXHJcbiAgICAvLyBDcmVhdGUgYW4gYXJyYXkgb2YgYWxsIGlucHV0IGVsZW1lbnRzIGluc2lkZSB0aGUgZm9ybVxyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBTZWxlY3QgdGhlIHN1Ym1pdCBidXR0b24gaW5zaWRlIHRoZSBmb3JtXHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vIFByaXZhdGUgbWV0aG9kIHRvIGNoZWNrIGlmIGFueSBpbnB1dCBmaWVsZCBpcyBpbnZhbGlkXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIC8vIENoZWNrIGlmIGFueSBpbnB1dCBmaWVsZCBpbiB0aGUgZm9ybSBpcyBpbnZhbGlkXHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICAvLyBQcml2YXRlIG1ldGhvZCB0byBlbmFibGUgb3IgZGlzYWJsZSB0aGUgc3VibWl0IGJ1dHRvbiBiYXNlZCBvbiBmb3JtIHZhbGlkaXR5XHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgLy8gSWYgdGhlcmUncyBhbnkgaW52YWxpZCBpbnB1dCwgZGlzYWJsZSB0aGUgc3VibWl0IGJ1dHRvbjsgb3RoZXJ3aXNlLCBlbmFibGUgaXRcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFByaXZhdGUgbWV0aG9kIHRvIGNoZWNrIHRoZSB2YWxpZGl0eSBvZiBhIHNwZWNpZmljIGlucHV0IGVsZW1lbnQgYW5kIHNob3cvaGlkZSBlcnJvciBtZXNzYWdlc1xyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAvLyBGaW5kIHRoZSBjb3JyZXNwb25kaW5nIGVycm9yIG1lc3NhZ2UgZWxlbWVudCBmb3IgdGhlIGlucHV0IGZpZWxkXHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcblxyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgLy8gQWRkIHRoZSBlcnJvciBjbGFzcyBhbmQgc2hvdyB0aGUgdmFsaWRhdGlvbiBtZXNzYWdlIGlmIHRoZSBpbnB1dCBpcyBpbnZhbGlkXHJcbiAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIFJlbW92ZSB0aGUgZXJyb3IgY2xhc3MgYW5kIGNsZWFyIHRoZSBlcnJvciBtZXNzYWdlIGlmIHRoZSBpbnB1dCBpcyB2YWxpZFxyXG4gICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gUHJpdmF0ZSBtZXRob2QgdG8gc2V0IHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgaW5wdXQgZmllbGRzXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gQ2hlY2sgdGhlIGJ1dHRvbiBzdGF0ZSBpbml0aWFsbHkgaW4gY2FzZSBzb21lIGZpZWxkcyBhcmUgYWxyZWFkeSBmaWxsZWRcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgLy8gQWRkIGV2ZW50IGxpc3RlbmVycyB0byBhbGwgaW5wdXQgZmllbGRzIGluIHRoZSBmb3JtXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIC8vIENoZWNrIHRoZSB2YWxpZGl0eSBvZiB0aGUgaW5wdXQgZmllbGQgaW4gcmVhbC10aW1lIGFuZCB1cGRhdGUgdGhlIGJ1dHRvbiBzdGF0ZVxyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBQdWJsaWMgbWV0aG9kIHRvIGVuYWJsZSB2YWxpZGF0aW9uIChzZXRzIHVwIHRoZSBldmVudCBsaXN0ZW5lcnMgZm9yIHRoZSBmb3JtKVxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgLy8gUHVibGljIG1ldGhvZCB0byByZXNldCBmb3JtIHZhbGlkYXRpb24gKGNsZWFyIGVycm9ycyBhbmQgcmVzZXQgYnV0dG9uIHN0YXRlKVxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgaW5wdXQgZmllbGRzIGluIHRoZSBmb3JtXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICAgICk7XHJcbiAgICAgIC8vIFJlbW92ZSBhbnkgZXJyb3IgY2xhc3NlcyBhbmQgY2xlYXIgZXJyb3IgbWVzc2FnZXNcclxuICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFJlc2V0IHRoZSBzdWJtaXQgYnV0dG9uJ3Mgc3RhdGVcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgfVxyXG5cclxuICAvLyBQdWJsaWMgbWV0aG9kIHRvIGRpc2FibGUgdGhlIHN1Ym1pdCBidXR0b25cclxuICBkaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgLy8gQWRkIGEgY2xhc3MgdG8gZGlzYWJsZSB0aGUgYnV0dG9uIGFuZCBzZXQgdGhlIGRpc2FibGVkIGF0dHJpYnV0ZSB0byB0cnVlXHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG59XHJcbiIsIi8vIFRoaXMgY2xhc3MgaGFuZGxlcyB0aGUgYmFzaWMgZnVuY3Rpb25hbGl0eSBmb3Igb3BlbmluZyBhbmQgY2xvc2luZyBwb3B1cHMuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAvLyBTZWxlY3QgdGhlIHBvcHVwIGVsZW1lbnQgdXNpbmcgdGhlIHByb3ZpZGVkIHNlbGVjdG9yLlxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuXHJcbiAgICAvLyBCaW5kIHRoZSBjb250ZXh0IG9mIHRoZSBfaGFuZGxlRXNjQ2xvc2UgbWV0aG9kIHRvIHRoaXMgaW5zdGFuY2VcclxuICAgIC8vIFRoaXMgZW5zdXJlcyB0aGF0IHRoZSAndGhpcycga2V5d29yZCBpbnNpZGUgX2hhbmRsZUVzY0Nsb3NlIHJlZmVycyB0byB0aGUgY2xhc3MgaW5zdGFuY2VcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIC8vIE1ldGhvZCB0byBvcGVuIHRoZSBwb3B1cCBhbmQgYWRkIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGRldGVjdCB0aGUgXCJFc2NhcGVcIiBrZXkgcHJlc3NcclxuICBvcGVuKCkge1xyXG4gICAgLy8gQWRkIGEgY2xhc3MgdG8gb3BlbiB0aGUgcG9wdXBcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG5cclxuICAgIC8vIEF0dGFjaCBhbiBldmVudCBsaXN0ZW5lciB0byB0aGUgZG9jdW1lbnQgdG8gZGV0ZWN0IHRoZSBcIkVzY2FwZVwiIGtleSBwcmVzcyBhbmQgY2xvc2UgdGhlIHBvcHVwXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICAvLyBNZXRob2QgdG8gY2xvc2UgdGhlIHBvcHVwIGFuZCByZW1vdmUgdGhlIFwiRXNjYXBlXCIga2V5IGV2ZW50IGxpc3RlbmVyXHJcbiAgY2xvc2UoKSB7XHJcbiAgICAvLyBSZW1vdmUgdGhlIGNsYXNzIHRoYXQgb3BlbnMgdGhlIHBvcHVwXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuXHJcbiAgICAvLyBSZW1vdmUgdGhlIFwia2V5ZG93blwiIGV2ZW50IGxpc3RlbmVyIHdoZW4gdGhlIHBvcHVwIGlzIGNsb3NlZFxyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgLy8gUHJpdmF0ZSBtZXRob2QgdG8gaGFuZGxlIGNsb3NpbmcgdGhlIHBvcHVwIHdoZW4gdGhlIFwiRXNjYXBlXCIga2V5IGlzIHByZXNzZWRcclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICAvLyBJZiB0aGUgXCJFc2NhcGVcIiBrZXkgaXMgcHJlc3NlZCwgY2xvc2UgdGhlIHBvcHVwXHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBNZXRob2QgdG8gc2V0IHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgdGhlIHBvcHVwIChjbG9zZSBidXR0b24gYW5kIGJhY2tncm91bmQgY2xpY2spXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvLyBGaW5kIGFuZCBhdHRhY2ggYW4gZXZlbnQgbGlzdGVuZXIgdG8gdGhlIGNsb3NlIGJ1dHRvbiBvZiB0aGUgcG9wdXBcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpOyAvLyBDbG9zZSB0aGUgcG9wdXAgd2hlbiB0aGUgY2xvc2UgYnV0dG9uIGlzIGNsaWNrZWRcclxuICAgICAgfSk7XHJcblxyXG4gICAgLy8gQWRkIGFuIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSBwb3B1cCB0byBjbG9zZSBpdCB3aGVuIGNsaWNraW5nIG9uIHRoZSBiYWNrZ3JvdW5kIChvdXRzaWRlIHRoZSBwb3B1cCBjb250ZW50KVxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICAvLyBJZiB0aGUgdXNlciBjbGlja3MgZGlyZWN0bHkgb24gdGhlIHBvcHVwIGJhY2tncm91bmQsIGNsb3NlIHRoZSBwb3B1cFxyXG4gICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gdGhpcy5fcG9wdXBFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiLy8gSW1wb3J0IHRoZSBiYXNlIFBvcHVwIGNsYXNzXHJcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuLy8gUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHRvIGhhbmRsZSBmb3JtcyBpbnNpZGUgYSBwb3B1cFxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIC8vIENvbnN0cnVjdG9yIHRha2VzIHRoZSBwb3B1cCBzZWxlY3RvciBhbmQgYSBmdW5jdGlvbiB0byBoYW5kbGUgZm9ybSBzdWJtaXNzaW9uXHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgLy8gQ2FsbCB0aGUgcGFyZW50IGNsYXNzIChQb3B1cCkgY29uc3RydWN0b3Igd2l0aCB0aGUgcG9wdXBTZWxlY3RvclxyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcblxyXG4gICAgLy8gU3RvcmUgdGhlIGZvcm0gc3VibWlzc2lvbiBoYW5kbGVyIGZ1bmN0aW9uXHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuXHJcbiAgICAvLyBTZWxlY3QgdGhlIGZvcm0gZWxlbWVudCBpbnNpZGUgdGhlIHBvcHVwXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG5cclxuICAgIC8vIFNlbGVjdCBhbGwgaW5wdXQgZmllbGRzIGluc2lkZSB0aGUgZm9ybSBhbmQgY29udmVydCB0aGVtIHRvIGFuIGFycmF5XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vIFByaXZhdGUgbWV0aG9kIHRvIGdldCB0aGUgdmFsdWVzIGZyb20gYWxsIGlucHV0IGZpZWxkc1xyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIC8vIENyZWF0ZSBhbiBlbXB0eSBvYmplY3QgdG8gc3RvcmUgdGhlIGlucHV0IHZhbHVlc1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuXHJcbiAgICAvLyBJdGVyYXRlIG92ZXIgYWxsIGlucHV0IGVsZW1lbnRzIGFuZCBzdG9yZSB0aGVpciBuYW1lIGFuZCB2YWx1ZSBpbiB0aGUgb2JqZWN0XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFJldHVybiB0aGUgb2JqZWN0IGNvbnRhaW5pbmcgYWxsIGlucHV0IHZhbHVlc1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgLy8gTWV0aG9kIHRvIHNldCBldmVudCBsaXN0ZW5lcnMgZm9yIHRoZSBwb3B1cFxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gQ2FsbCB0aGUgcGFyZW50IGNsYXNzJ3Mgc2V0RXZlbnRMaXN0ZW5lcnMgbWV0aG9kIHRvIGFkZCBnZW5lcmFsIHBvcHVwIGxpc3RlbmVyc1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAvLyBBZGQgYSBzdWJtaXQgZXZlbnQgbGlzdGVuZXIgdG8gdGhlIGZvcm1cclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAvLyBQcmV2ZW50IHRoZSBkZWZhdWx0IGZvcm0gc3VibWlzc2lvbiBiZWhhdmlvclxyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgIC8vIENhbGwgdGhlIGZvcm0gc3VibWlzc2lvbiBoYW5kbGVyIHdpdGggdGhlIGlucHV0IHZhbHVlc1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG5cclxuICAgICAgLy8gUmVzZXQgdGhlIGZvcm0gYWZ0ZXIgc3VibWlzc2lvblxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsIi8vIEltcG9ydHNcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IHsgZm9ybVZhbGlkYXRpb25TZXR0aW5ncywgc2VsZWN0b3JzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7IC8vIEltcG9ydCBQb3B1cCBmb3IgdGhlIGRlbGV0ZSBjb25maXJtYXRpb24gcG9wdXBcclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7IC8vIEltcG9ydCBzdHlsZXMgZm9yIHRoZSBwYWdlXHJcblxyXG4vLyBJbml0aWFsaXplIHRoZSBBUEkgaW5zdGFuY2VcclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiNzY1YTU2YWItMTQwMy00NDQ0LThmYWMtNWZjMTg3MWU5Njk1XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIERlc3RydWN0dXJlZCBzZWxlY3RvcnMgZnJvbSBjb25zdGFudHNcclxuY29uc3Qge1xyXG4gIHByb2ZpbGVFZGl0Rm9ybSxcclxuICBhZGRDYXJkRm9ybSxcclxuICBwcm9maWxlRWRpdEJ1dHRvbixcclxuICBhZGRDYXJkQnV0dG9uLFxyXG4gIHByb2ZpbGVUaXRsZUlucHV0LFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxyXG4gIGF2YXRhckVkaXRGb3JtLFxyXG59ID0gc2VsZWN0b3JzO1xyXG5cclxuLy8gQ2FjaGUgRE9NIGVsZW1lbnRzIGZvciBidXR0b25zIHRvIGF2b2lkIHF1ZXJ5aW5nIHRoZSBET00gcmVwZWF0ZWRseVxyXG5jb25zdCBzYXZlUHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1lZGl0LXBvcHVwIC5wb3B1cF9fYnV0dG9uXCJcclxuKTtcclxuY29uc3Qgc2F2ZUNhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLXBvcHVwIC5wb3B1cF9fYnV0dG9uXCIpO1xyXG5jb25zdCBzYXZlQXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNhdmF0YXItZWRpdC1wb3B1cCAucG9wdXBfX2J1dHRvblwiXHJcbik7XHJcbmNvbnN0IGF2YXRhckVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtYXZhdGFyLWJ1dHRvblwiKTtcclxuXHJcbi8vIEluaXRpYWxpemUgVXNlckluZm8gdG8gbWFuYWdlIGFuZCB1cGRhdGUgcHJvZmlsZSBkYXRhIG9uIHRoZSBwYWdlXHJcbmNvbnN0IHVzZXJJbmZvSW5zdGFuY2UgPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIiwgLy8gU2VsZWN0b3IgZm9yIHByb2ZpbGUgbmFtZVxyXG4gIGRlc2NyaXB0aW9uU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsIC8vIFNlbGVjdG9yIGZvciBwcm9maWxlIGRlc2NyaXB0aW9uXHJcbiAgYXZhdGFyU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2ltYWdlXCIsIC8vIFNlbGVjdG9yIGZvciBwcm9maWxlIGF2YXRhclxyXG59KTtcclxuXHJcbi8vIEluaXRpYWxpemUgdGhlIGRlbGV0ZSBjb25maXJtYXRpb24gcG9wdXAgdXNpbmcgdGhlIFBvcHVwIGNsYXNzXHJcbmNvbnN0IGRlbGV0ZVBvcHVwSW5zdGFuY2UgPSBuZXcgUG9wdXAoXCIjZGVsZXRlLWNhcmQtcG9wdXBcIik7XHJcbmRlbGV0ZVBvcHVwSW5zdGFuY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy8gU2V0IHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgZXNjYXBlIGtleSwgY2xvc2UgYnV0dG9uLCBhbmQgYmFja2dyb3VuZCBjbGlja3NcclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGhhbmRsZSBjYXJkIGRlbGV0aW9uIHdpdGggY29uZmlybWF0aW9uIHBvcHVwXHJcbmNvbnN0IGhhbmRsZURlbGV0ZUNhcmQgPSAoY2FyZEVsZW1lbnQsIGNhcmRJZCkgPT4ge1xyXG4gIGxldCBjb25maXJtRGVsZXRlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb25maXJtLWRlbGV0ZS1idXR0b25cIik7XHJcblxyXG4gIC8vIFJlbW92ZSBhbnkgcHJldmlvdXNseSBhZGRlZCBldmVudCBsaXN0ZW5lcnMgYnkgcmVwbGFjaW5nIHRoZSBidXR0b25cclxuICBjb25maXJtRGVsZXRlQnV0dG9uLnJlcGxhY2VXaXRoKGNvbmZpcm1EZWxldGVCdXR0b24uY2xvbmVOb2RlKHRydWUpKTtcclxuXHJcbiAgLy8gUmVhc3NpZ24gdG8gdGhlIG5ld2x5IGNyZWF0ZWQgYnV0dG9uXHJcbiAgY29uZmlybURlbGV0ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29uZmlybS1kZWxldGUtYnV0dG9uXCIpO1xyXG5cclxuICAvLyBDb25maXJtcyBjYXJkIGRlbGV0aW9uIGJ5IGNhbGxpbmcgdGhlIEFQSSBhbmQgcmVtb3ZpbmcgdGhlIGNhcmQgZWxlbWVudCBmcm9tIHRoZSBET01cclxuICBjb25zdCBjb25maXJtRGVsZXRlID0gKCkgPT4ge1xyXG4gICAgYXBpXHJcbiAgICAgIC5kZWxldGVDYXJkKGNhcmRJZCkgLy8gQVBJIGNhbGwgdG8gZGVsZXRlIHRoZSBjYXJkXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTsgLy8gUmVtb3ZlIGNhcmQgZnJvbSBVSSB1cG9uIHN1Y2Nlc3NmdWwgZGVsZXRpb25cclxuICAgICAgICBkZWxldGVQb3B1cEluc3RhbmNlLmNsb3NlKCk7IC8vIENsb3NlIHRoZSBwb3B1cCBhZnRlciBkZWxldGlvblxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihgRXJyb3IgZGVsZXRpbmcgY2FyZDogJHtlcnJ9YCkpOyAvLyBIYW5kbGUgYW55IGVycm9yc1xyXG4gIH07XHJcblxyXG4gIC8vIEFkZCBjbGljayBsaXN0ZW5lciBmb3IgY29uZmlybWluZyBkZWxldGlvbiAob25jZSB0byBhdm9pZCBkdXBsaWNhdGUgbGlzdGVuZXJzKVxyXG4gIGNvbmZpcm1EZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNvbmZpcm1EZWxldGUsIHtcclxuICAgIG9uY2U6IHRydWUsXHJcbiAgfSk7XHJcblxyXG4gIC8vIE9wZW4gdGhlIGRlbGV0ZSBjb25maXJtYXRpb24gcG9wdXBcclxuICBkZWxldGVQb3B1cEluc3RhbmNlLm9wZW4oKTtcclxuXHJcbiAgLy8gQ2xvc2UgcG9wdXAgYW5kIHJlbW92ZSBldmVudCBsaXN0ZW5lciBpZiBjbGlja2VkIG9yIEVzY1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBkZWxldGVQb3B1cEluc3RhbmNlLmNsb3NlKCk7XHJcbiAgICBjb25maXJtRGVsZXRlQnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjb25maXJtRGVsZXRlKTsgLy8gQ2xlYW51cCBldmVudCBsaXN0ZW5lclxyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3QgY3JlYXRlQ2FyZCA9IChjYXJkRGF0YSkgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgbmFtZTogY2FyZERhdGEubmFtZSxcclxuICAgICAgbGluazogY2FyZERhdGEubGluayxcclxuICAgICAgX2lkOiBjYXJkRGF0YS5faWQsXHJcbiAgICAgIG93bmVyOiBjYXJkRGF0YS5vd25lcixcclxuICAgICAgaXNMaWtlZDogY2FyZERhdGEuaXNMaWtlZCxcclxuICAgIH0sXHJcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsIC8vIENhcmQgdGVtcGxhdGUgc2VsZWN0b3JcclxuICAgIGhhbmRsZUltYWdlUG9wdXAsIC8vIEZ1bmN0aW9uIHRvIGhhbmRsZSBpbWFnZSBjbGljayBwb3B1cFxyXG4gICAgY3VycmVudFVzZXJJZCwgLy8gQ3VycmVudCB1c2VyIElEIGZvciBtYW5hZ2luZyBjYXJkIG93bmVyc2hpcFxyXG4gICAgYXBpLCAvLyBBUEkgaW5zdGFuY2UgZm9yIGhhbmRsaW5nIGxpa2VzIGFuZCBkZWxldGlvblxyXG4gICAgaGFuZGxlRGVsZXRlQ2FyZCAvLyBGdW5jdGlvbiB0byBoYW5kbGUgY2FyZCBkZWxldGlvblxyXG4gICk7XHJcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpOyAvLyBSZXR1cm4gdGhlIGNhcmQgZWxlbWVudCB0byByZW5kZXJcclxufTtcclxuXHJcbi8vIEluaXRpYWxpemUgdGhlIFNlY3Rpb24gY2xhc3MgdG8gcmVuZGVyIGFuZCBtYW5hZ2UgdGhlIGNhcmQgbGlzdCBpbiB0aGUgVUlcclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7IC8vIENyZWF0ZSBhIGNhcmQgZWxlbWVudCBmb3IgZWFjaCBjYXJkXHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpOyAvLyBBZGQgY2FyZCB0byB0aGUgY2FyZCBsaXN0IChwcmVwZW5kIGl0KVxyXG4gICAgfSxcclxuICB9LFxyXG4gIFwiLmNhcmRzX19saXN0XCIgLy8gQ29udGFpbmVyIHdoZXJlIGNhcmRzIHdpbGwgYmUgYXBwZW5kZWRcclxuKTtcclxuXHJcbi8vIEZldGNoIGFuZCByZW5kZXIgdXNlciBpbmZvIGFuZCBjYXJkcyBhZnRlciBwYWdlIGxvYWRcclxubGV0IGN1cnJlbnRVc2VySWQ7IC8vIFZhcmlhYmxlIHRvIHN0b3JlIHRoZSBjdXJyZW50IHVzZXIncyBJRFxyXG5hcGlcclxuICAuZ2V0VXNlckluZm8oKVxyXG4gIC50aGVuKCh1c2VySW5mbykgPT4ge1xyXG4gICAgLy8gU2V0IHVzZXIgaW5mbyBvbiB0aGUgcGFnZSB1c2luZyB0aGUgVXNlckluZm8gaW5zdGFuY2VcclxuICAgIHVzZXJJbmZvSW5zdGFuY2Uuc2V0VXNlckluZm8oe1xyXG4gICAgICBuYW1lOiB1c2VySW5mby5uYW1lLCAvLyBTZXQgcHJvZmlsZSBuYW1lXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB1c2VySW5mby5hYm91dCwgLy8gU2V0IHByb2ZpbGUgZGVzY3JpcHRpb25cclxuICAgICAgYXZhdGFyOiB1c2VySW5mby5hdmF0YXIsIC8vIFNldCBwcm9maWxlIGF2YXRhclxyXG4gICAgfSk7XHJcbiAgICBjdXJyZW50VXNlcklkID0gdXNlckluZm8uX2lkOyAvLyBTdG9yZSB0aGUgY3VycmVudCB1c2VyIElEXHJcblxyXG4gICAgcmV0dXJuIGFwaS5nZXRJbml0aWFsQ2FyZHMoKTsgLy8gRmV0Y2ggaW5pdGlhbCBjYXJkcyBmcm9tIHRoZSBzZXJ2ZXJcclxuICB9KVxyXG4gIC50aGVuKChjYXJkcykgPT4ge1xyXG4gICAgLy8gUmVuZGVyIGVhY2ggY2FyZCBvbiB0aGUgcGFnZVxyXG4gICAgY2FyZHMuZm9yRWFjaCgoY2FyZERhdGEpID0+IHtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKHtcclxuICAgICAgICBuYW1lOiBjYXJkRGF0YS5uYW1lLFxyXG4gICAgICAgIGxpbms6IGNhcmREYXRhLmxpbmssXHJcbiAgICAgICAgX2lkOiBjYXJkRGF0YS5faWQsXHJcbiAgICAgICAgb3duZXI6IGNhcmREYXRhLm93bmVyLFxyXG4gICAgICAgIGlzTGlrZWQ6IGNhcmREYXRhLmlzTGlrZWQsXHJcbiAgICAgIH0pO1xyXG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTsgLy8gQWRkIGVhY2ggY2FyZCB0byB0aGUgY2FyZCBzZWN0aW9uXHJcbiAgICB9KTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgdXNlciBpbmZvIG9yIGNhcmRzOlwiLCBlcnIpKTsgLy8gSGFuZGxlIGVycm9ycyBkdXJpbmcgQVBJIHJlcXVlc3RzXHJcblxyXG4vLyBPcGVucyBwcm9maWxlIGVkaXQgcG9wdXAgYW5kIHByZS1maWxscyB0aGUgZm9ybSB3aXRoIGN1cnJlbnQgdXNlciBpbmZvXHJcbmNvbnN0IGhhbmRsZVByb2ZpbGVFZGl0ID0gKCkgPT4ge1xyXG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm9JbnN0YW5jZS5nZXRVc2VySW5mbygpOyAvLyBHZXQgY3VycmVudCBwcm9maWxlIGRhdGFcclxuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLm5hbWU7IC8vIFByZS1maWxsIHByb2ZpbGUgbmFtZSBpbnB1dFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gdXNlckRhdGEuZGVzY3JpcHRpb247IC8vIFByZS1maWxsIHByb2ZpbGUgZGVzY3JpcHRpb25cclxuICBwcm9maWxlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTsgLy8gUmVzZXQgZm9ybSB2YWxpZGF0aW9uIHN0YXRlXHJcbiAgcHJvZmlsZUVkaXRQb3B1cEluc3RhbmNlLm9wZW4oKTsgLy8gT3BlbiB0aGUgcHJvZmlsZSBlZGl0IHBvcHVwXHJcbn07XHJcblxyXG4vLyBPcGVucyB0aGUgaW1hZ2UgcG9wdXAgd2hlbiBhIGNhcmQgaW1hZ2UgaXMgY2xpY2tlZFxyXG5jb25zdCBoYW5kbGVJbWFnZVBvcHVwID0gKGxpbmssIG5hbWUpID0+IHtcclxuICBwaWN0dXJlUG9wdXBJbnN0YW5jZS5vcGVuKHsgbmFtZSwgbGluayB9KTsgLy8gT3BlbiB0aGUgcG9wdXAgd2l0aCB0aGUgaW1hZ2UgYW5kIGl0cyBjYXB0aW9uXHJcbn07XHJcblxyXG4vLyBJbml0aWFsaXplIHByb2ZpbGUgZWRpdCBwb3B1cCB3aXRoIGZvcm0gc3VibWlzc2lvbiBoYW5kbGluZ1xyXG5jb25zdCBwcm9maWxlRWRpdFBvcHVwSW5zdGFuY2UgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWVkaXQtcG9wdXBcIixcclxuICAoZm9ybURhdGEpID0+IHtcclxuICAgIHNhdmVQcm9maWxlQnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuXHJcbiAgICAvLyBTZW5kIFBBVENIIHJlcXVlc3QgdG8gdXBkYXRlIHRoZSB1c2VyJ3MgcHJvZmlsZSBpbmZvXHJcbiAgICBhcGlcclxuICAgICAgLnVwZGF0ZVVzZXJJbmZvKHtcclxuICAgICAgICBuYW1lOiBmb3JtRGF0YS5uYW1lLFxyXG4gICAgICAgIGFib3V0OiBmb3JtRGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKHVwZGF0ZWRVc2VySW5mbykgPT4ge1xyXG4gICAgICAgIHVzZXJJbmZvSW5zdGFuY2Uuc2V0VXNlckluZm8oe1xyXG4gICAgICAgICAgbmFtZTogdXBkYXRlZFVzZXJJbmZvLm5hbWUsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogdXBkYXRlZFVzZXJJbmZvLmFib3V0LFxyXG4gICAgICAgICAgYXZhdGFyOiB1cGRhdGVkVXNlckluZm8uYXZhdGFyLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHByb2ZpbGVFZGl0UG9wdXBJbnN0YW5jZS5jbG9zZSgpOyAvLyBDbG9zZSB0aGUgcG9wdXAgYWZ0ZXIgc3VjY2Vzc1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGRhdGluZyBwcm9maWxlOlwiLCBlcnIpOyAvLyBIYW5kbGUgZXJyb3JzIGR1cmluZyBwcm9maWxlIHVwZGF0ZVxyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgc2F2ZVByb2ZpbGVCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjsgLy8gUmV2ZXJ0IHRoZSBidXR0b24gdGV4dFxyXG4gICAgICB9KTtcclxuICB9XHJcbik7XHJcblxyXG5wcm9maWxlRWRpdFBvcHVwSW5zdGFuY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy8gU2V0IGV2ZW50IGxpc3RlbmVycyBmb3IgdGhlIHByb2ZpbGUgZWRpdCBwb3B1cFxyXG5cclxuLy8gSW5pdGlhbGl6ZSB0aGUgY2FyZCBhZGRpdGlvbiBwb3B1cCB3aXRoIGZvcm0gc3VibWlzc2lvbiBoYW5kbGluZ1xyXG5jb25zdCBhZGRDYXJkUG9wdXBJbnN0YW5jZSA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI2FkZC1jYXJkLXBvcHVwXCIsXHJcbiAgKGZvcm1EYXRhKSA9PiB7XHJcbiAgICBzYXZlQ2FyZEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcblxyXG4gICAgLy8gU2VuZCBQT1NUIHJlcXVlc3QgdG8gYWRkIGEgbmV3IGNhcmRcclxuICAgIGFwaVxyXG4gICAgICAuYWRkQ2FyZCh7XHJcbiAgICAgICAgbmFtZTogZm9ybURhdGEudGl0bGUsIC8vIENhcmQgdGl0bGVcclxuICAgICAgICBsaW5rOiBmb3JtRGF0YS51cmwsIC8vIENhcmQgaW1hZ2UgVVJMXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChuZXdDYXJkKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKHtcclxuICAgICAgICAgIG5hbWU6IG5ld0NhcmQubmFtZSxcclxuICAgICAgICAgIGxpbms6IG5ld0NhcmQubGluayxcclxuICAgICAgICAgIF9pZDogbmV3Q2FyZC5faWQsXHJcbiAgICAgICAgICBvd25lcjogbmV3Q2FyZC5vd25lcixcclxuICAgICAgICAgIGxpa2VzOiBuZXdDYXJkLmxpa2VzLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpOyAvLyBBZGQgbmV3IGNhcmQgdG8gdGhlIFVJXHJcbiAgICAgICAgYWRkQ2FyZFBvcHVwSW5zdGFuY2UuX2Zvcm1FbGVtZW50LnJlc2V0KCk7IC8vIFJlc2V0IGZvcm0gZmllbGRzIGFmdGVyIHN1Ym1pc3Npb25cclxuICAgICAgICBhZGRDYXJkUG9wdXBJbnN0YW5jZS5jbG9zZSgpOyAvLyBDbG9zZSB0aGUgcG9wdXAgYWZ0ZXIgc3VjY2Vzc1xyXG4gICAgICAgIHNhdmVDYXJkQnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZlXCI7IC8vIFJlc2V0IGJ1dHRvbiB0ZXh0XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWRkaW5nIGNhcmQ6XCIsIGVycikpOyAvLyBIYW5kbGUgZXJyb3JzIGR1cmluZyBjYXJkIGFkZGl0aW9uXHJcbiAgfVxyXG4pO1xyXG5cclxuYWRkQ2FyZFBvcHVwSW5zdGFuY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy8gU2V0IGV2ZW50IGxpc3RlbmVycyBmb3IgdGhlIGNhcmQgYWRkaXRpb24gcG9wdXBcclxuXHJcbi8vIEluaXRpYWxpemUgYXZhdGFyIGVkaXQgcG9wdXAgd2l0aCBmb3JtIHN1Ym1pc3Npb24gaGFuZGxpbmdcclxuY29uc3QgYXZhdGFyRWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjYXZhdGFyLWVkaXQtcG9wdXBcIiwgKGZvcm1EYXRhKSA9PiB7XHJcbiAgc2F2ZUF2YXRhckJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcblxyXG4gIC8vIENoZWNrIGlmIHRoZSBmb3JtIGlzIHZhbGlkIGJlZm9yZSBzZW5kaW5nIHRoZSBBUEkgcmVxdWVzdFxyXG4gIGlmICghYXZhdGFyRm9ybVZhbGlkYXRvci5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgIC8vIFNlbmQgUEFUQ0ggcmVxdWVzdCB0byB1cGRhdGUgdGhlIHVzZXIncyBhdmF0YXJcclxuICAgIGFwaVxyXG4gICAgICAudXBkYXRlQXZhdGFyKGZvcm1EYXRhLmF2YXRhcilcclxuICAgICAgLnRoZW4oKHVwZGF0ZWRVc2VySW5mbykgPT4ge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2VcIikuc3JjID0gdXBkYXRlZFVzZXJJbmZvLmF2YXRhcjsgLy8gVXBkYXRlIGF2YXRhciBpbiB0aGUgVUlcclxuICAgICAgICBhdmF0YXJFZGl0UG9wdXAuY2xvc2UoKTsgLy8gQ2xvc2UgdGhlIHBvcHVwIGFmdGVyIHN1Y2Nlc3NcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGRhdGluZyBhdmF0YXI6XCIsIGVycikpIC8vIEhhbmRsZSBlcnJvcnMgZHVyaW5nIGF2YXRhciB1cGRhdGVcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHNhdmVBdmF0YXJCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICAgICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbmF2YXRhckVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpOyAvLyBTZXQgZXZlbnQgbGlzdGVuZXJzIGZvciB0aGUgYXZhdGFyIGVkaXQgcG9wdXBcclxuXHJcbi8vIFNldCB1cCB0aGUgZXZlbnQgbGlzdGVuZXIgZm9yIHRoZSBhdmF0YXIgZWRpdCBidXR0b25cclxuYXZhdGFyRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGF2YXRhckVkaXRQb3B1cC5vcGVuKCk7IC8vIE9wZW4gdGhlIGF2YXRhciBlZGl0IHBvcHVwIHdoZW4gdGhlIGJ1dHRvbiBpcyBjbGlja2VkXHJcbn0pO1xyXG5cclxuLy8gSW5pdGlhbGl6ZSBpbWFnZSBwb3B1cCBmb3IgZGlzcGxheWluZyBsYXJnZXIgaW1hZ2VzXHJcbmNvbnN0IHBpY3R1cmVQb3B1cEluc3RhbmNlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3BpY3R1cmUtcG9wdXBcIik7XHJcbnBpY3R1cmVQb3B1cEluc3RhbmNlLnNldEV2ZW50TGlzdGVuZXJzKCk7IC8vIFNldCBldmVudCBsaXN0ZW5lcnMgZm9yIHRoZSBpbWFnZSBwb3B1cFxyXG5cclxuLy8gSW5pdGlhbGl6ZSBmb3JtIHZhbGlkYXRvcnMgZm9yIHByb2ZpbGUsIGNhcmQsIGFuZCBhdmF0YXIgZm9ybXNcclxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBmb3JtVmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIHByb2ZpbGVFZGl0Rm9ybVxyXG4pO1xyXG5jb25zdCBjYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIGZvcm1WYWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgYWRkQ2FyZEZvcm1cclxuKTtcclxuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIGZvcm1WYWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgYXZhdGFyRWRpdEZvcm1cclxuKTtcclxuXHJcbi8vIEVuYWJsZSBmb3JtIHZhbGlkYXRpb24gZm9yIGFsbCBmb3Jtc1xyXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmNhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLyBTZXQgdXAgZXZlbnQgbGlzdGVuZXJzIGZvciBwcm9maWxlIGVkaXQgYW5kIGFkZCBjYXJkIGJ1dHRvbnNcclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZVByb2ZpbGVFZGl0KTsgLy8gT3BlbiBwcm9maWxlIGVkaXQgcG9wdXBcclxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZENhcmRQb3B1cEluc3RhbmNlLm9wZW4oKTsgLy8gT3BlbiBjYXJkIGFkZGl0aW9uIHBvcHVwXHJcbn0pO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIC8vIENvbnN0cnVjdG9yIGluaXRpYWxpemVzIEFQSSB3aXRoIGEgYmFzZSBVUkwgYW5kIGF1dGhvcml6YXRpb24gaGVhZGVyc1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgLy8gTWV0aG9kIHRvIGNoZWNrIHRoZSBzZXJ2ZXIncyByZXNwb25zZSBhbmQgaGFuZGxlIGVycm9yc1xyXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTsgLy8gUmV0dXJuIEpTT04gaWYgcmVzcG9uc2UgaXMgT0tcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTsgLy8gUmVqZWN0IHByb21pc2Ugd2l0aCBlcnJvciBzdGF0dXNcclxuICB9XHJcblxyXG4gIC8vIEdlbmVyYWwgZXJyb3IgaGFuZGxlciBmb3IgY2F0Y2hpbmcgYW5kIGxvZ2dpbmcgZXJyb3JzXHJcbiAgX2hhbmRsZUVycm9yKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpOyAvLyBMb2cgZXJyb3IgdG8gY29uc29sZVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7IC8vIFJlamVjdCB0aGUgcHJvbWlzZSB3aXRoIHRoZSBlcnJvclxyXG4gIH1cclxuXHJcbiAgLy8gRmV0Y2ggaW5pdGlhbCBzZXQgb2YgY2FyZHMgZnJvbSB0aGUgc2VydmVyXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLCAvLyBQYXNzIGF1dGhvcml6YXRpb24gaGVhZGVyc1xyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpOyAvLyBSZXR1cm4gSlNPTiBpZiByZXNwb25zZSBpcyBPS1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7IC8vIFJlamVjdCBpZiB0aGVyZSdzIGFuIGVycm9yXHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkFQSSBlcnJvcjpcIiwgZXJyKTsgLy8gTG9nIHRoZSBlcnJvclxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpOyAvLyBQcm9wYWdhdGUgdGhlIGVycm9yXHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gRmV0Y2ggdXNlciBpbmZvcm1hdGlvbiBmcm9tIHRoZSBzZXJ2ZXJcclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycywgLy8gQXV0aG9yaXphdGlvbiBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSkgLy8gSGFuZGxlIHJlc3BvbnNlIHZhbGlkYXRpb25cclxuICAgICAgLmNhdGNoKHRoaXMuX2hhbmRsZUVycm9yKTsgLy8gSGFuZGxlIGVycm9yc1xyXG4gIH1cclxuXHJcbiAgLy8gVXBkYXRlIHVzZXIgaW5mb3JtYXRpb24gKG5hbWUsIGFib3V0KSBvbiB0aGUgc2VydmVyXHJcbiAgdXBkYXRlVXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLCAvLyBQQVRDSCByZXF1ZXN0IGZvciBwYXJ0aWFsIHVwZGF0ZXNcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxyXG4gICAgICB9KSwgLy8gSlNPTiBib2R5IHdpdGggdXBkYXRlZCBkYXRhXHJcbiAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKSAvLyBIYW5kbGUgcmVzcG9uc2UgdmFsaWRhdGlvblxyXG4gICAgICAuY2F0Y2godGhpcy5faGFuZGxlRXJyb3IpOyAvLyBIYW5kbGUgZXJyb3JzXHJcbiAgfVxyXG5cclxuICAvLyBBZGQgYSBuZXcgY2FyZCAobmFtZSwgbGluaykgdG8gdGhlIHNlcnZlclxyXG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIiwgLy8gUE9TVCByZXF1ZXN0IHRvIGNyZWF0ZSBuZXcgY2FyZFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBsaW5rOiBsaW5rLFxyXG4gICAgICB9KSwgLy8gSlNPTiBib2R5IHdpdGggY2FyZCBkZXRhaWxzXHJcbiAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKSAvLyBIYW5kbGUgcmVzcG9uc2UgdmFsaWRhdGlvblxyXG4gICAgICAuY2F0Y2godGhpcy5faGFuZGxlRXJyb3IpOyAvLyBIYW5kbGUgZXJyb3JzXHJcbiAgfVxyXG5cclxuICAvLyBEZWxldGUgYSBjYXJkIGJ5IGl0cyBJRFxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsIC8vIERFTEVURSByZXF1ZXN0IHRvIHJlbW92ZSB0aGUgY2FyZFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLCAvLyBBdXRob3JpemF0aW9uIGhlYWRlcnNcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpIC8vIEhhbmRsZSByZXNwb25zZSB2YWxpZGF0aW9uXHJcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7IC8vIEhhbmRsZSBlcnJvcnNcclxuICB9XHJcblxyXG4gIC8vIExpa2UgYSBjYXJkIGJ5IHNlbmRpbmcgYSBQVVQgcmVxdWVzdCB0byB0aGUgc2VydmVyXHJcbiAgbGlrZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsIC8vIFBVVCByZXF1ZXN0IHRvIGxpa2UgdGhlIGNhcmRcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpIC8vIEhhbmRsZSByZXNwb25zZSB2YWxpZGF0aW9uXHJcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7IC8vIEhhbmRsZSBlcnJvcnNcclxuICB9XHJcblxyXG4gIC8vIERpc2xpa2UgYSBjYXJkIGJ5IHNlbmRpbmcgYSBERUxFVEUgcmVxdWVzdCB0byB0aGUgc2VydmVyXHJcbiAgZGlzbGlrZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsIC8vIERFTEVURSByZXF1ZXN0IHRvIHJlbW92ZSB0aGUgbGlrZVxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSkgLy8gSGFuZGxlIHJlc3BvbnNlIHZhbGlkYXRpb25cclxuICAgICAgLmNhdGNoKHRoaXMuX2hhbmRsZUVycm9yKTsgLy8gSGFuZGxlIGVycm9yc1xyXG4gIH1cclxuXHJcbiAgLy8gVXBkYXRlIHVzZXIgYXZhdGFyIGJ5IHNlbmRpbmcgYSBQQVRDSCByZXF1ZXN0IHdpdGggdGhlIG5ldyBhdmF0YXIgVVJMXHJcbiAgdXBkYXRlQXZhdGFyKGF2YXRhclVybCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsIC8vIFBBVENIIHJlcXVlc3QgZm9yIHBhcnRpYWwgdXBkYXRlc1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBhdmF0YXJVcmwsIC8vIEpTT04gYm9keSB3aXRoIG5ldyBhdmF0YXIgVVJMXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSkgLy8gSGFuZGxlIHJlc3BvbnNlIHZhbGlkYXRpb25cclxuICAgICAgLmNhdGNoKHRoaXMuX2hhbmRsZUVycm9yKTsgLy8gSGFuZGxlIGVycm9yc1xyXG4gIH1cclxufVxyXG4iLCIvLyBUaGUgVXNlckluZm8gY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIG1hbmFnaW5nIGFuZCB1cGRhdGluZyB1c2VyIGluZm9ybWF0aW9uIG9uIHRoZSBwYWdlXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAvLyBUaGUgY29uc3RydWN0b3IgYWNjZXB0cyBhbiBvYmplY3Qgd2l0aCBDU1Mgc2VsZWN0b3JzIGZvciB0aGUgdXNlcidzIG5hbWUsIGRlc2NyaXB0aW9uLCBhbmQgYXZhdGFyXHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGRlc2NyaXB0aW9uU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0pIHtcclxuICAgIC8vIFN0b3JlIHRoZSBET00gZWxlbWVudHMgZm9yIG5hbWUsIGRlc2NyaXB0aW9uLCBhbmQgYXZhdGFyIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBzZWxlY3RvcnNcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIC8vIE1ldGhvZCB0byBnZXQgdGhlIGN1cnJlbnQgdXNlciBpbmZvcm1hdGlvbiBmcm9tIHRoZSBwYWdlXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAvLyBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIHRoZSBjdXJyZW50IG5hbWUsIGRlc2NyaXB0aW9uLCBhbmQgYXZhdGFyIFVSTCBmcm9tIHRoZSBwYWdlXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgYXZhdGFyOiB0aGlzLl9hdmF0YXJFbGVtZW50LnNyYyxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvLyBNZXRob2QgdG8gdXBkYXRlIHRoZSB1c2VyIGluZm9ybWF0aW9uIG9uIHRoZSBwYWdlXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBkZXNjcmlwdGlvbiwgYXZhdGFyIH0pIHtcclxuICAgIC8vIFVwZGF0ZSB0aGUgbmFtZSBhbmQgZGVzY3JpcHRpb24gb24gdGhlIHBhZ2VcclxuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG5cclxuICAgIC8vIFVwZGF0ZSB0aGUgYXZhdGFyIG9ubHkgaWYgdGhlIG5ldyBhdmF0YXIgVVJMIGlzIHByb3ZpZGVkXHJcbiAgICBpZiAoYXZhdGFyKSB7XHJcbiAgICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gYXZhdGFyO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCIvLyBUaGUgU2VjdGlvbiBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgcmVuZGVyaW5nIGl0ZW1zIGFuZCBtYW5hZ2luZyBhIGNvbnRhaW5lclxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICAvLyBDb25zdHJ1Y3RvciBhY2NlcHRzIGFuIG9iamVjdCB3aXRoIGEgcmVuZGVyZXIgZnVuY3Rpb24gYW5kIGEgY29udGFpbmVyIHNlbGVjdG9yXHJcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgLy8gU3RvcmUgdGhlIHJlbmRlcmVyIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSB1c2VkIHRvIHJlbmRlciBlYWNoIGl0ZW1cclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcblxyXG4gICAgLy8gU2VsZWN0IHRoZSBjb250YWluZXIgZWxlbWVudCB3aGVyZSBpdGVtcyB3aWxsIGJlIGFkZGVkXHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIC8vIE1ldGhvZCB0byByZW5kZXIgYSBsaXN0IG9mIGl0ZW1zXHJcbiAgLy8gSXQgaXRlcmF0ZXMgb3ZlciB0aGUgaXRlbXMgYW5kIGNhbGxzIHRoZSByZW5kZXJlciBmdW5jdGlvbiBmb3IgZWFjaCBvbmVcclxuICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gIH1cclxuXHJcbiAgLy8gTWV0aG9kIHRvIGFkZCBhIG5ldyBpdGVtIHRvIHRoZSBjb250YWluZXJcclxuICAvLyBJdCBwcmVwZW5kcyB0aGUgZWxlbWVudCB0byB0aGUgY29udGFpbmVyIChhZGRzIHRvIHRoZSB0b3ApXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiLy8gSW1wb3J0IHRoZSBiYXNlIFBvcHVwIGNsYXNzXHJcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuLy8gUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB0byBoYW5kbGUgaW1hZ2UgcG9wdXBzXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIC8vIENvbnN0cnVjdG9yIHRha2VzIHRoZSBwb3B1cCBzZWxlY3RvciBhcyBhbiBhcmd1bWVudFxyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIC8vIENhbGwgdGhlIHBhcmVudCBjbGFzcyAoUG9wdXApIGNvbnN0cnVjdG9yIHdpdGggdGhlIHBvcHVwU2VsZWN0b3JcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG5cclxuICAgIC8vIFNlbGVjdCB0aGUgaW1hZ2UgZWxlbWVudCBpbnNpZGUgdGhlIHBvcHVwXHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XHJcblxyXG4gICAgLy8gU2VsZWN0IHRoZSBjYXB0aW9uIGVsZW1lbnQgaW5zaWRlIHRoZSBwb3B1cFxyXG4gICAgdGhpcy5fY2FwdGlvbkVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FwdGlvblwiKTtcclxuICB9XHJcblxyXG4gIC8vIE1ldGhvZCB0byBvcGVuIHRoZSBpbWFnZSBwb3B1cCB3aXRoIHRoZSBwcm92aWRlZCBuYW1lIGFuZCBsaW5rXHJcbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgLy8gU2V0IHRoZSBpbWFnZSBzb3VyY2UgdG8gdGhlIHByb3ZpZGVkIGxpbmtcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSBsaW5rO1xyXG5cclxuICAgIC8vIFNldCB0aGUgYWx0IHRleHQgb2YgdGhlIGltYWdlIHRvIHRoZSBwcm92aWRlZCBuYW1lXHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWx0ID0gbmFtZTtcclxuXHJcbiAgICAvLyBTZXQgdGhlIGNhcHRpb24gdGV4dCB0byB0aGUgcHJvdmlkZWQgbmFtZVxyXG4gICAgdGhpcy5fY2FwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG5cclxuICAgIC8vIENhbGwgdGhlIHBhcmVudCBjbGFzcydzIG9wZW4gbWV0aG9kIHRvIGRpc3BsYXkgdGhlIHBvcHVwXHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJmb3JtVmFsaWRhdGlvblNldHRpbmdzIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsInNlbGVjdG9ycyIsInByb2ZpbGVFZGl0Rm9ybSIsImRvY3VtZW50IiwiZm9ybXMiLCJhZGRDYXJkRm9ybSIsInByb2ZpbGVFZGl0QnV0dG9uIiwicXVlcnlTZWxlY3RvciIsImFkZENhcmRCdXR0b24iLCJwcm9maWxlRWRpdFBvcHVwIiwiYWRkQ2FyZFBvcHVwIiwicGljdHVyZVBvcHVwIiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZURlc2NyaXB0aW9uIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImNhcmRMaXN0RWwiLCJhZGRDYXJkVGl0bGVJbnB1dCIsImFkZENhcmRVcmxJbnB1dCIsImF2YXRhckVkaXRGb3JtIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJjdXJyZW50VXNlcklkIiwiYXBpIiwiaGFuZGxlRGVsZXRlQ2FyZCIsIm5hbWUiLCJsaW5rIiwiX2lkIiwiaXNMaWtlZCIsImxpa2VzIiwib3duZXIiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9pc0xpa2VkIiwiX2xpa2VzIiwiX293bmVyIiwiX2N1cnJlbnRVc2VySWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfYXBpIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfc2V0TGlrZVN0YXRlIiwiX2xpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJfdG9nZ2xlTGlrZSIsImRpc2xpa2VDYXJkIiwidGhlbiIsInVwZGF0ZWRDYXJkIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJsaWtlQ2FyZCIsIl9zZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfdHJhc2hCdXR0b24iLCJfY2FyZEVsZW1lbnQiLCJfY2FyZEltYWdlRWwiLCJnZXRWaWV3IiwiX2NyZWF0ZUNhcmRFbGVtZW50IiwiY2FyZEVsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRUaXRsZUVsIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9zZXR0aW5ncyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzb21lIiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJlcnJvckVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJyZXNldFZhbGlkYXRpb24iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwicmVzZXQiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJfaGFuZGxlRXJyb3IiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsImdldFVzZXJJbmZvIiwidXBkYXRlVXNlckluZm8iLCJfcmVmMiIsImFib3V0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhZGRDYXJkIiwiX3JlZjMiLCJkZWxldGVDYXJkIiwiY2FyZElkIiwidXBkYXRlQXZhdGFyIiwiYXZhdGFyVXJsIiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsInNhdmVQcm9maWxlQnV0dG9uIiwic2F2ZUNhcmRCdXR0b24iLCJzYXZlQXZhdGFyQnV0dG9uIiwiYXZhdGFyRWRpdEJ1dHRvbiIsInVzZXJJbmZvSW5zdGFuY2UiLCJuYW1lU2VsZWN0b3IiLCJkZXNjcmlwdGlvblNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfZGVzY3JpcHRpb25FbGVtZW50IiwiX2F2YXRhckVsZW1lbnQiLCJkZXNjcmlwdGlvbiIsInNldFVzZXJJbmZvIiwiZGVsZXRlUG9wdXBJbnN0YW5jZSIsImNvbmZpcm1EZWxldGVCdXR0b24iLCJyZXBsYWNlV2l0aCIsImNvbmZpcm1EZWxldGUiLCJvbmNlIiwiY3JlYXRlQ2FyZCIsImNhcmREYXRhIiwiaGFuZGxlSW1hZ2VQb3B1cCIsImNhcmRTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInVzZXJJbmZvIiwiY2FyZHMiLCJwaWN0dXJlUG9wdXBJbnN0YW5jZSIsInByb2ZpbGVFZGl0UG9wdXBJbnN0YW5jZSIsImZvcm1EYXRhIiwidXBkYXRlZFVzZXJJbmZvIiwiZmluYWxseSIsImFkZENhcmRQb3B1cEluc3RhbmNlIiwidGl0bGUiLCJ1cmwiLCJuZXdDYXJkIiwiYXZhdGFyRWRpdFBvcHVwIiwiYXZhdGFyRm9ybVZhbGlkYXRvciIsIl9pbWFnZUVsZW1lbnQiLCJfY2FwdGlvbkVsZW1lbnQiLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsImNhcmRGb3JtVmFsaWRhdG9yIiwiaGFuZGxlUHJvZmlsZUVkaXQiLCJ1c2VyRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=
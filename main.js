!function(){var t={240:function(){},578:function(){}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";var t=n(240),e=n.n(t);const o={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error"},r={profileEditForm:document.forms["profile-form"],addCardForm:document.forms["card-form"],profileEditButton:document.querySelector("#profile-edit-button"),addCardButton:document.querySelector("#profile-add-button"),profileEditPopup:document.querySelector("#profile-edit-popup"),addCardPopup:document.querySelector("#add-card-popup"),picturePopup:document.querySelector("#picture-popup"),profileTitle:document.querySelector(".profile__title"),profileDescription:document.querySelector(".profile__description"),profileTitleInput:document.querySelector("#profile-title-input"),profileDescriptionInput:document.querySelector("#profile-description-input"),cardListEl:document.querySelector(".cards__list"),addCardTitleInput:document.querySelector("#add-card-title"),addCardUrlInput:document.querySelector("#add-card-url")};var i=n(578),s=n.n(i);class l{constructor(t,e){this._settings=t,this._formElement=e,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._submitButton=this._formElement.querySelector(this._settings.submitButtonSelector)}_hasInvalidInput(){return this._inputList.some((t=>!t.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():(this._submitButton.classList.remove(this._settings.inactiveButtonClass),this._submitButton.disabled=!1)}_checkInputValidity(t){const e=this._formElement.querySelector(`#${t.id}-error`);t.validity.valid?(t.classList.remove(this._settings.inputErrorClass),e.textContent=""):(t.classList.add(this._settings.inputErrorClass),e.textContent=t.validationMessage)}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}enableValidation(){this._setEventListeners()}resetValidation(){this._inputList.forEach((t=>{const e=this._formElement.querySelector(`#${t.id}-error`);t.classList.remove(this._settings.inputErrorClass),e.textContent=""})),this._toggleButtonState()}disableButton(){this._submitButton.classList.add(this._settings.inactiveButtonClass),this._submitButton.disabled=!0}}class c{constructor(t){this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(t){"Escape"===t.key&&this.close()}setEventListeners(){this._popupElement.querySelector(".popup__close").addEventListener("click",(()=>this.close())),this._popupElement.addEventListener("click",(t=>{t.target===this._popupElement&&this.close()}))}}class p extends c{constructor(t,e){super(t),this._handleFormSubmit=e,this._formElement=this._popupElement.querySelector(".popup__form"),this._inputList=Array.from(this._formElement.querySelectorAll(".popup__input"))}_getInputValues(){const t={};return this._inputList.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super.setEventListeners(),this._formElement.addEventListener("submit",(t=>{t.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._formElement.reset()}))}}const u=new(e())({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"2844dc79-6340-476e-8bf6-ea55311716d1","Content-Type":"application/json"}}),{profileEditForm:a,addCardForm:d,profileEditButton:m,addCardButton:_,profileTitleInput:h,profileDescriptionInput:f}=r,E=new class{constructor(t){let{nameSelector:e,descriptionSelector:n}=t;this._nameElement=document.querySelector(e),this._descriptionElement=document.querySelector(n)}getUserInfo(){return{name:this._nameElement.textContent,description:this._descriptionElement.textContent}}setUserInfo(t){let{name:e,description:n}=t;this._nameElement.textContent=e,this._descriptionElement.textContent=n}}({nameSelector:".profile__title",descriptionSelector:".profile__description"});function v(t){return new(s())(t,"#card-template",S).getView()}const y=new class{constructor(t,e){let{items:n,renderer:o}=t;this._items=n,this._renderer=o,this._container=document.querySelector(e)}renderItems(){this._items.forEach((t=>{this._renderer(t)}))}addItem(t){this._container.prepend(t)}}({renderer:t=>{const e=v(t);y.addItem(e)}},".cards__list");function S(t,e){C.open({name:e,link:t})}u.getUserInfo().then((t=>{E.setUserInfo({name:t.name,description:t.about})})).catch((t=>console.error("Error fetching user info:",t))),u.getInitialCards().then((t=>{t.forEach((t=>{const e=v(t);y.addItem(e)}))})).catch((t=>console.error("Error fetching cards:",t)));const g=new p("#profile-edit-popup",(t=>{u.updateUserInfo(t).then((t=>{E.setUserInfo({name:t.name,description:t.about}),g.close()})).catch((t=>console.error("Error updating profile:",t)))}));g.setEventListeners();const b=new p("#add-card-popup",(t=>{u.addCard(t).then((t=>{const e=v(t);y.addItem(e),b.close()})).catch((t=>console.error("Error adding card:",t)))}));b.setEventListeners();const C=new class extends c{constructor(t){super(t),this._imageElement=this._popupElement.querySelector(".popup__image"),this._captionElement=this._popupElement.querySelector(".popup__caption")}open(t){let{name:e,link:n}=t;this._imageElement.src=n,this._imageElement.alt=e,this._captionElement.textContent=e,super.open()}}("#picture-popup");C.setEventListeners();const L=new l(o,a),I=new l(o,d);L.enableValidation(),I.enableValidation(),m.addEventListener("click",(function(){const t=E.getUserInfo();h.value=t.name,f.value=t.description,L.resetValidation(),g.open()})),_.addEventListener("click",(()=>{b.open()}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ekMyQyxFQUFxQjlFLGtCQUNyQm1FLEVBQXlCN0QsTUFDM0IsSUE2REFqRCxFQUFjeUMsaUJBQWlCLFNBQVMsS0FDdEN5RSxFQUFxQmpFLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9wcmFjdGljdW0vd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHRmdW5jdGlvbigpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcblx0XHRmdW5jdGlvbigpIHsgcmV0dXJuIG1vZHVsZTsgfTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIGRlZmluaXRpb24pIHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsIi8vIEZvcm0gVmFsaWRhdGlvbiBTZXR0aW5nc1xyXG5leHBvcnQgY29uc3QgZm9ybVZhbGlkYXRpb25TZXR0aW5ncyA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG59O1xyXG5cclxuLy8gSW5pdGlhbCBDYXJkc1xyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbi8vIEVsZW1lbnQgU2VsZWN0b3JzXHJcbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XHJcbiAgcHJvZmlsZUVkaXRGb3JtOiBkb2N1bWVudC5mb3Jtc1tcInByb2ZpbGUtZm9ybVwiXSxcclxuICBhZGRDYXJkRm9ybTogZG9jdW1lbnQuZm9ybXNbXCJjYXJkLWZvcm1cIl0sXHJcbiAgcHJvZmlsZUVkaXRCdXR0b246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKSxcclxuICBhZGRDYXJkQnV0dG9uOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWJ1dHRvblwiKSxcclxuICBwcm9maWxlRWRpdFBvcHVwOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1wb3B1cFwiKSxcclxuICBhZGRDYXJkUG9wdXA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtcG9wdXBcIiksXHJcbiAgcGljdHVyZVBvcHVwOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BpY3R1cmUtcG9wdXBcIiksXHJcbiAgcHJvZmlsZVRpdGxlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpLFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKSxcclxuICBwcm9maWxlVGl0bGVJbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpLFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIiksXHJcbiAgY2FyZExpc3RFbDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKSxcclxuICBhZGRDYXJkVGl0bGVJbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC10aXRsZVwiKSxcclxuICBhZGRDYXJkVXJsSW5wdXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtdXJsXCIpLFxyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAvLyBDb25zdHJ1Y3RvciBpbml0aWFsaXplcyB0aGUgY2xhc3Mgd2l0aCB2YWxpZGF0aW9uIHNldHRpbmdzIGFuZCB0aGUgZm9ybSBlbGVtZW50IHRvIGJlIHZhbGlkYXRlZFxyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5nczsgLy8gT2JqZWN0IGNvbnRhaW5pbmcgdmFsaWRhdGlvbiBzZXR0aW5ncyAoc2VsZWN0b3JzLCBjbGFzc2VzKVxyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDsgLy8gVGhlIGZvcm0gZWxlbWVudCB0aGF0IHdpbGwgYmUgdmFsaWRhdGVkXHJcblxyXG4gICAgLy8gQ3JlYXRlIGFuIGFycmF5IG9mIGFsbCBpbnB1dCBlbGVtZW50cyBpbnNpZGUgdGhlIGZvcm1cclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcblxyXG4gICAgLy8gU2VsZWN0IHRoZSBzdWJtaXQgYnV0dG9uIGluc2lkZSB0aGUgZm9ybVxyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBQcml2YXRlIG1ldGhvZCB0byBjaGVjayBpZiBhbnkgaW5wdXQgZmllbGQgaXMgaW52YWxpZFxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICAvLyBVc2UgdGhlICdzb21lJyBhcnJheSBtZXRob2QgdG8gY2hlY2sgaWYgYW55IGlucHV0IGZpZWxkIGlzIGludmFsaWRcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIC8vIFByaXZhdGUgbWV0aG9kIHRvIGVuYWJsZSBvciBkaXNhYmxlIHRoZSBzdWJtaXQgYnV0dG9uIGJhc2VkIG9uIGZvcm0gdmFsaWRpdHlcclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICAvLyBJZiBhbnkgaW5wdXQgaXMgaW52YWxpZCwgZGlzYWJsZSB0aGUgc3VibWl0IGJ1dHRvbiwgb3RoZXJ3aXNlIGVuYWJsZSBpdFxyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpOyAvLyBEaXNhYmxlIHRoZSBidXR0b24gaWYgdGhlcmUgaXMgYW4gaW52YWxpZCBpbnB1dFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gRW5hYmxlIHRoZSBidXR0b24gYnkgcmVtb3ZpbmcgdGhlIGluYWN0aXZlIGNsYXNzIGFuZCBzZXR0aW5nIHRoZSBkaXNhYmxlZCBwcm9wZXJ0eSB0byBmYWxzZVxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBQcml2YXRlIG1ldGhvZCB0byBjaGVjayB0aGUgdmFsaWRpdHkgb2YgYSBzcGVjaWZpYyBpbnB1dCBlbGVtZW50IGFuZCBzaG93L2hpZGUgZXJyb3IgbWVzc2FnZXNcclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgLy8gU2VsZWN0IHRoZSBlcnJvciBtZXNzYWdlIGVsZW1lbnQgYXNzb2NpYXRlZCB3aXRoIHRoZSBpbnB1dCBmaWVsZFxyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG5cclxuICAgIC8vIElmIHRoZSBpbnB1dCBpcyBpbnZhbGlkLCBzaG93IHRoZSBlcnJvciBtZXNzYWdlIGFuZCBhcHBseSB0aGUgZXJyb3IgY2xhc3NcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7IC8vIEFkZCBlcnJvciBjbGFzcyB0byB0aGUgaW5wdXRcclxuICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlOyAvLyBEaXNwbGF5IHRoZSB2YWxpZGF0aW9uIGVycm9yIG1lc3NhZ2VcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIElmIHRoZSBpbnB1dCBpcyB2YWxpZCwgcmVtb3ZlIHRoZSBlcnJvciBjbGFzcyBhbmQgY2xlYXIgdGhlIGVycm9yIG1lc3NhZ2VcclxuICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTsgLy8gUmVtb3ZlIGVycm9yIGNsYXNzXHJcbiAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7IC8vIENsZWFyIHRoZSBlcnJvciBtZXNzYWdlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBQcml2YXRlIG1ldGhvZCB0byBzZXQgdXAgZXZlbnQgbGlzdGVuZXJzIGZvciBpbnB1dCBmaWVsZHNcclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvLyBJbml0aWFsbHkgY2hlY2sgdGhlIGJ1dHRvbiBzdGF0ZSB0byBtYWtlIHN1cmUgaXQgcmVmbGVjdHMgdGhlIGZvcm0ncyBjdXJyZW50IHN0YXRlXHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIC8vIEFkZCBhbiAnaW5wdXQnIGV2ZW50IGxpc3RlbmVyIHRvIGVhY2ggaW5wdXQgZmllbGQgdG8gdmFsaWRhdGUgdGhlIGlucHV0IGluIHJlYWwtdGltZVxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTsgLy8gQ2hlY2sgdGhlIHZhbGlkaXR5IG9mIHRoZSBpbnB1dCBmaWVsZFxyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7IC8vIFVwZGF0ZSB0aGUgYnV0dG9uIHN0YXRlIGJhc2VkIG9uIHRoZSBjdXJyZW50IGlucHV0IHZhbGlkaXR5XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBQdWJsaWMgbWV0aG9kIHRvIGVuYWJsZSBmb3JtIHZhbGlkYXRpb24gYnkgc2V0dGluZyBldmVudCBsaXN0ZW5lcnNcclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy8gU2V0IHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgaW5wdXQgZmllbGRzIGFuZCBmb3JtIHZhbGlkYXRpb25cclxuICB9XHJcblxyXG4gIC8vIFB1YmxpYyBtZXRob2QgdG8gcmVzZXQgZm9ybSB2YWxpZGF0aW9uIChjbGVhciBlcnJvcnMgYW5kIHJlc2V0IGJ1dHRvbiBzdGF0ZSlcclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICAvLyBDbGVhciB2YWxpZGF0aW9uIGVycm9ycyBmb3IgYWxsIGlucHV0c1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgICApO1xyXG4gICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpOyAvLyBSZW1vdmUgZXJyb3IgY2xhc3NcclxuICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjsgLy8gQ2xlYXIgdGhlIGVycm9yIG1lc3NhZ2VcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFJlc2V0IHRoZSBzdWJtaXQgYnV0dG9uJ3Mgc3RhdGVcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7IC8vIEVuc3VyZSB0aGUgYnV0dG9uIHJlZmxlY3RzIHRoZSBjdXJyZW50IGZvcm0gdmFsaWRpdHlcclxuICB9XHJcblxyXG4gIC8vIFB1YmxpYyBtZXRob2QgdG8gZGlzYWJsZSB0aGUgc3VibWl0IGJ1dHRvblxyXG4gIGRpc2FibGVCdXR0b24oKSB7XHJcbiAgICAvLyBBZGQgdGhlIGluYWN0aXZlIGNsYXNzIGFuZCBzZXQgdGhlIGRpc2FibGVkIHByb3BlcnR5IHRvIHRydWVcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7IC8vIEJpbmQgdGhlIGNvbnRleHQgb2YgX2hhbmRsZUVzY0Nsb3NlXHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpOyAvLyBDbG9zZSB0aGUgcG9wdXAgaWYgRVNDIGlzIHByZXNzZWRcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQgPT09IHRoaXMuX3BvcHVwRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTsgLy8gQ2xvc2UgdGhlIHBvcHVwIGlmIGNsaWNrZWQgb24gb3ZlcmxheVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpOyAvLyBDYWxsIHRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgcGFyZW50IGNsYXNzIChQb3B1cClcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTsgLy8gSW5pdGlhbGl6ZSBhbiBlbXB0eSBvYmplY3QgdG8gaG9sZCBmb3JtIGRhdGFcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7IC8vIFJldHVybiB0aGUgb2JqZWN0IGNvbnRhaW5pbmcgYWxsIGlucHV0IHZhbHVlc1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpOyAvLyBDYWxsIHRoZSBwYXJlbnQgY2xhc3MgbWV0aG9kIHRvIGhhbmRsZSBwb3B1cCBsaXN0ZW5lcnNcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCB0aGUgZGVmYXVsdCBmb3JtIHN1Ym1pc3Npb24gYmVoYXZpb3JcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTsgLy8gQ2FsbCB0aGUgZm9ybSBzdWJtaXQgaGFuZGxlciBmdW5jdGlvblxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpOyAvLyBSZXNldCB0aGUgZm9ybSBhZnRlciBzdWJtaXNzaW9uXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiLy8gSW1wb3J0cyBtb2R1bGVzIGFuZCBjbGFzc2VzXHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCB7IGZvcm1WYWxpZGF0aW9uU2V0dGluZ3MsIHNlbGVjdG9ycyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5cclxuLy8gSW5pdGlhbGl6ZSB0aGUgQVBJIGluc3RhbmNlXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjI4NDRkYzc5LTYzNDAtNDc2ZS04YmY2LWVhNTUzMTE3MTZkMVwiLCAvLyBSZXBsYWNlIHdpdGggeW91ciBhY3R1YWwgdG9rZW5cclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gRGVzdHJ1Y3R1cmVkIHNlbGVjdG9ycyBmcm9tIHRoZSBjb25zdGFudHMgZmlsZVxyXG5jb25zdCB7XHJcbiAgcHJvZmlsZUVkaXRGb3JtLFxyXG4gIGFkZENhcmRGb3JtLFxyXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxyXG4gIGFkZENhcmRCdXR0b24sXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXHJcbn0gPSBzZWxlY3RvcnM7XHJcblxyXG4vLyBJbml0aWFsaXplIFVzZXJJbmZvIHRvIG1hbmFnZSBhbmQgdXBkYXRlIHByb2ZpbGUgZGF0YSAobmFtZSBhbmQgZGVzY3JpcHRpb24pXHJcbmNvbnN0IHVzZXJJbmZvSW5zdGFuY2UgPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBkZXNjcmlwdGlvblNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG59KTtcclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGhhbmRsZSBvcGVuaW5nIHRoZSBkZWxldGUgY29uZmlybWF0aW9uIHBvcHVwXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNhcmQoY2FyZEVsZW1lbnQsIGNhcmRJZCkge1xyXG4gIGNvbnN0IGRlbGV0ZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtY2FyZC1wb3B1cFwiKTtcclxuICBjb25zdCBjb25maXJtRGVsZXRlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb25maXJtLWRlbGV0ZS1idXR0b25cIik7XHJcblxyXG4gIC8vIE9wZW4gdGhlIGRlbGV0ZSBjb25maXJtYXRpb24gcG9wdXBcclxuICBkZWxldGVQb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG5cclxuICAvLyBXaGVuIHRoZSB1c2VyIGNvbmZpcm1zIHRoZSBkZWxldGlvblxyXG4gIGNvbmZpcm1EZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGFwaVxyXG4gICAgICAuZGVsZXRlQ2FyZChjYXJkSWQpIC8vIEFQSSBjYWxsIHRvIGRlbGV0ZSB0aGUgY2FyZFxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBjYXJkIGZyb20gdGhlIFVJXHJcbiAgICAgICAgY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgLy8gQ2xvc2UgdGhlIHBvcHVwIGFmdGVyIGRlbGV0aW9uXHJcbiAgICAgICAgZGVsZXRlUG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoYEVycm9yIGRlbGV0aW5nIGNhcmQ6ICR7ZXJyfWApKTtcclxuICB9KTtcclxuXHJcbiAgLy8gU2V0IHVwIGV2ZW50IGxpc3RlbmVyIHRvIGNsb3NlIHRoZSBwb3B1cFxyXG4gIGRlbGV0ZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBkZWxldGVQb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vLyBGdW5jdGlvbiB0byBjcmVhdGUgYSBuZXcgY2FyZCB1c2luZyB0aGUgQ2FyZCBjbGFzc1xyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmREYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlUG9wdXApO1xyXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTsgLy8gUmV0dXJuIHRoZSBjYXJkIGVsZW1lbnQgZm9yIHJlbmRlcmluZ1xyXG59XHJcblxyXG4vLyBJbml0aWFsaXplIHRoZSBTZWN0aW9uIGNsYXNzIHRvIHJlbmRlciBhbmQgbWFuYWdlIHRoZSBjYXJkIGxpc3RcclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIFwiLmNhcmRzX19saXN0XCJcclxuKTtcclxuXHJcbi8vIEFQSSBDYWxscyAtIEZldGNoIGFuZCByZW5kZXIgdXNlciBpbmZvIGFuZCBjYXJkc1xyXG5hcGlcclxuICAuZ2V0VXNlckluZm8oKVxyXG4gIC50aGVuKCh1c2VySW5mbykgPT4ge1xyXG4gICAgdXNlckluZm9JbnN0YW5jZS5zZXRVc2VySW5mbyh7XHJcbiAgICAgIG5hbWU6IHVzZXJJbmZvLm5hbWUsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB1c2VySW5mby5hYm91dCxcclxuICAgIH0pO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyB1c2VyIGluZm86XCIsIGVycikpO1xyXG5cclxuYXBpXHJcbiAgLmdldEluaXRpYWxDYXJkcygpXHJcbiAgLnRoZW4oKGNhcmRzKSA9PiB7XHJcbiAgICBjYXJkcy5mb3JFYWNoKChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xyXG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBjYXJkczpcIiwgZXJyKSk7XHJcblxyXG4vLyBGdW5jdGlvbiB0byBvcGVuIHRoZSBwcm9maWxlIGVkaXQgcG9wdXAgd2l0aCBjdXJyZW50IHVzZXIgZGF0YVxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRWRpdCgpIHtcclxuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvSW5zdGFuY2UuZ2V0VXNlckluZm8oKTsgLy8gR2V0IGN1cnJlbnQgcHJvZmlsZSBkYXRhIChuYW1lLCBkZXNjcmlwdGlvbilcclxuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLm5hbWU7IC8vIFByZS1maWxsIHRoZSBmb3JtIHdpdGggdGhlIGN1cnJlbnQgbmFtZVxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gdXNlckRhdGEuZGVzY3JpcHRpb247IC8vIFByZS1maWxsIHRoZSBmb3JtIHdpdGggdGhlIGN1cnJlbnQgZGVzY3JpcHRpb25cclxuXHJcbiAgcHJvZmlsZUZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7IC8vIFJlc2V0IHZhbGlkYXRpb24gc3RhdGUgZm9yIHRoZSBmb3JtXHJcbiAgcHJvZmlsZUVkaXRQb3B1cEluc3RhbmNlLm9wZW4oKTsgLy8gT3BlbiB0aGUgcG9wdXBcclxufVxyXG5cclxuLy8gRnVuY3Rpb24gdG8gb3BlbiB0aGUgaW1hZ2UgcG9wdXAgd2l0aCB0aGUgcHJvdmlkZWQgaW1hZ2UgbGluayBhbmQgbmFtZVxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZVBvcHVwKGxpbmssIG5hbWUpIHtcclxuICBwaWN0dXJlUG9wdXBJbnN0YW5jZS5vcGVuKHsgbmFtZSwgbGluayB9KTsgLy8gUGFzcyB0aGUgaW1hZ2UgZGF0YSB0byB0aGUgcG9wdXAgaW5zdGFuY2VcclxufVxyXG5cclxuLy8gSW5pdGlhbGl6ZSB0aGUgcHJvZmlsZSBlZGl0IHBvcHVwIHdpdGggZm9ybSBoYW5kbGluZ1xyXG5jb25zdCBwcm9maWxlRWRpdFBvcHVwSW5zdGFuY2UgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWVkaXQtcG9wdXBcIixcclxuICAoZm9ybURhdGEpID0+IHtcclxuICAgIGFwaVxyXG4gICAgICAudXBkYXRlVXNlckluZm8oZm9ybURhdGEpIC8vIEFQSSBjYWxsIHRvIHVwZGF0ZSB1c2VyIGluZm9cclxuICAgICAgLnRoZW4oKHVwZGF0ZWRVc2VySW5mbykgPT4ge1xyXG4gICAgICAgIHVzZXJJbmZvSW5zdGFuY2Uuc2V0VXNlckluZm8oe1xyXG4gICAgICAgICAgbmFtZTogdXBkYXRlZFVzZXJJbmZvLm5hbWUsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogdXBkYXRlZFVzZXJJbmZvLmFib3V0LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHByb2ZpbGVFZGl0UG9wdXBJbnN0YW5jZS5jbG9zZSgpOyAvLyBDbG9zZSB0aGUgcG9wdXAgYWZ0ZXIgc3VibWlzc2lvblxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIHByb2ZpbGU6XCIsIGVycikpO1xyXG4gIH1cclxuKTtcclxucHJvZmlsZUVkaXRQb3B1cEluc3RhbmNlLnNldEV2ZW50TGlzdGVuZXJzKCk7IC8vIFNldCB1cCBldmVudCBsaXN0ZW5lcnMgZm9yIHRoZSBwb3B1cFxyXG5cclxuLy8gSW5pdGlhbGl6ZSB0aGUgYWRkIGNhcmQgcG9wdXAgd2l0aCBmb3JtIGhhbmRsaW5nXHJcbmNvbnN0IGFkZENhcmRQb3B1cEluc3RhbmNlID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjYWRkLWNhcmQtcG9wdXBcIixcclxuICAoZm9ybURhdGEpID0+IHtcclxuICAgIGFwaVxyXG4gICAgICAuYWRkQ2FyZChmb3JtRGF0YSkgLy8gQVBJIGNhbGwgdG8gYWRkIGEgbmV3IGNhcmRcclxuICAgICAgLnRoZW4oKG5ld0NhcmQpID0+IHtcclxuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQobmV3Q2FyZCk7IC8vIENyZWF0ZSB0aGUgbmV3IGNhcmRcclxuICAgICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTsgLy8gQWRkIGl0IHRvIHRoZSBzZWN0aW9uXHJcbiAgICAgICAgYWRkQ2FyZFBvcHVwSW5zdGFuY2UuY2xvc2UoKTsgLy8gQ2xvc2UgdGhlIHBvcHVwIGFmdGVyIHN1Ym1pc3Npb25cclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhZGRpbmcgY2FyZDpcIiwgZXJyKSk7XHJcbiAgfVxyXG4pO1xyXG5hZGRDYXJkUG9wdXBJbnN0YW5jZS5zZXRFdmVudExpc3RlbmVycygpOyAvLyBTZXQgdXAgZXZlbnQgbGlzdGVuZXJzIGZvciB0aGUgcG9wdXBcclxuXHJcbi8vIEluaXRpYWxpemUgdGhlIGltYWdlIHBvcHVwIGZvciBkaXNwbGF5aW5nIGxhcmdlciBpbWFnZXNcclxuY29uc3QgcGljdHVyZVBvcHVwSW5zdGFuY2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcGljdHVyZS1wb3B1cFwiKTtcclxucGljdHVyZVBvcHVwSW5zdGFuY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy8gU2V0IHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgdGhlIHBvcHVwXHJcblxyXG4vLyBJbml0aWFsaXplIGZvcm0gdmFsaWRhdG9ycyBmb3IgdGhlIHByb2ZpbGUgYW5kIGNhcmQgZm9ybXNcclxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBmb3JtVmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIHByb2ZpbGVFZGl0Rm9ybVxyXG4pO1xyXG5jb25zdCBjYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIGZvcm1WYWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgYWRkQ2FyZEZvcm1cclxuKTtcclxuXHJcbi8vIEVuYWJsZSBmb3JtIHZhbGlkYXRpb24gZm9yIGJvdGggZm9ybXNcclxucHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLyBTZXQgdXAgZXZlbnQgbGlzdGVuZXJzIGZvciB0aGUgcHJvZmlsZSBlZGl0IGFuZCBhZGQgY2FyZCBidXR0b25zXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVQcm9maWxlRWRpdCk7XHJcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRDYXJkUG9wdXBJbnN0YW5jZS5vcGVuKCk7IC8vIE9wZW4gdGhlIGFkZCBjYXJkIHBvcHVwIHdoZW4gdGhlIGJ1dHRvbiBpcyBjbGlja2VkXHJcbn0pO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgLy8gQ29uc3RydWN0b3IgaW5pdGlhbGl6ZXMgdGhlIGNsYXNzIHdpdGggdGhlIHNlbGVjdG9ycyBmb3IgdGhlIG5hbWUgYW5kIGRlc2NyaXB0aW9uIGVsZW1lbnRzXHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGRlc2NyaXB0aW9uU2VsZWN0b3IgfSkge1xyXG4gICAgLy8gR2V0IHRoZSBET00gZWxlbWVudCBmb3IgdGhlIHVzZXIncyBuYW1lIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBzZWxlY3RvclxyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcblxyXG4gICAgLy8gR2V0IHRoZSBET00gZWxlbWVudCBmb3IgdGhlIHVzZXIncyBkZXNjcmlwdGlvbiBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgc2VsZWN0b3JcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICAvLyBNZXRob2QgdG8gZ2V0IHRoZSBjdXJyZW50IHVzZXIgaW5mb3JtYXRpb24gKG5hbWUgYW5kIGRlc2NyaXB0aW9uKSBmcm9tIHRoZSBET01cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIC8vIFJldHVybiBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgY3VycmVudCBuYW1lIGFuZCBkZXNjcmlwdGlvbiB0ZXh0IGZyb20gdGhlIERPTSBlbGVtZW50c1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsIC8vIEdldCB0aGUgbmFtZSBmcm9tIHRoZSBET00gZWxlbWVudFxyXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50LCAvLyBHZXQgdGhlIGRlc2NyaXB0aW9uIGZyb20gdGhlIERPTSBlbGVtZW50XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8gTWV0aG9kIHRvIHVwZGF0ZSB0aGUgdXNlcidzIGluZm9ybWF0aW9uIGluIHRoZSBET01cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICAgIC8vIFVwZGF0ZSB0aGUgRE9NIGVsZW1lbnQgd2l0aCB0aGUgbmV3IG5hbWVcclxuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuXHJcbiAgICAvLyBVcGRhdGUgdGhlIERPTSBlbGVtZW50IHdpdGggdGhlIG5ldyBkZXNjcmlwdGlvblxyXG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pOyAvLyBSZW5kZXIgZWFjaCBpdGVtIGFuZCBhZGQgaXQgdG8gdGhlIGNvbnRhaW5lciB2aWEgdGhlIHJlbmRlcmVyXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0ocmVuZGVyZWRJdGVtKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChyZW5kZXJlZEl0ZW0pOyAvLyBBZGQgdGhlIHJlbmRlcmVkIGl0ZW0gdG8gdGhlIHRvcCBvZiB0aGUgY29udGFpbmVyXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXB0aW9uRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jYXB0aW9uXCIpO1xyXG4gIH1cclxuXHJcbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IGxpbms7IC8vIFNldCB0aGUgaW1hZ2UgVVJMXHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWx0ID0gbmFtZTsgLy8gU2V0IHRoZSBpbWFnZSBhbHQgdGV4dFxyXG4gICAgdGhpcy5fY2FwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lOyAvLyBTZXQgdGhlIGNhcHRpb24gdGV4dFxyXG4gICAgc3VwZXIub3BlbigpOyAvLyBPcGVuIHRoZSBwb3B1cFxyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZm9ybVZhbGlkYXRpb25TZXR0aW5ncyIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJzZWxlY3RvcnMiLCJwcm9maWxlRWRpdEZvcm0iLCJkb2N1bWVudCIsImZvcm1zIiwiYWRkQ2FyZEZvcm0iLCJwcm9maWxlRWRpdEJ1dHRvbiIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRDYXJkQnV0dG9uIiwicHJvZmlsZUVkaXRQb3B1cCIsImFkZENhcmRQb3B1cCIsInBpY3R1cmVQb3B1cCIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJjYXJkTGlzdEVsIiwiYWRkQ2FyZFRpdGxlSW5wdXQiLCJhZGRDYXJkVXJsSW5wdXQiLCJGb3JtVmFsaWRhdG9yIiwiY29uc3RydWN0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9zZXR0aW5ncyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzb21lIiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVCdXR0b24iLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJkaXNhYmxlZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJlcnJvckVsZW1lbnQiLCJpZCIsInRleHRDb250ZW50IiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImVuYWJsZVZhbGlkYXRpb24iLCJyZXNldFZhbGlkYXRpb24iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJuYW1lIiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0IiwiYXBpIiwiQXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwidXNlckluZm9JbnN0YW5jZSIsIl9yZWYiLCJuYW1lU2VsZWN0b3IiLCJkZXNjcmlwdGlvblNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2Rlc2NyaXB0aW9uRWxlbWVudCIsImdldFVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJzZXRVc2VySW5mbyIsIl9yZWYyIiwiY3JlYXRlQ2FyZCIsImNhcmREYXRhIiwiQ2FyZCIsImhhbmRsZUltYWdlUG9wdXAiLCJnZXRWaWV3IiwiY2FyZFNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsInJlbmRlcmVkSXRlbSIsInByZXBlbmQiLCJjYXJkRWxlbWVudCIsImxpbmsiLCJwaWN0dXJlUG9wdXBJbnN0YW5jZSIsInRoZW4iLCJ1c2VySW5mbyIsImFib3V0IiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJnZXRJbml0aWFsQ2FyZHMiLCJjYXJkcyIsInByb2ZpbGVFZGl0UG9wdXBJbnN0YW5jZSIsImZvcm1EYXRhIiwidXBkYXRlVXNlckluZm8iLCJ1cGRhdGVkVXNlckluZm8iLCJhZGRDYXJkUG9wdXBJbnN0YW5jZSIsImFkZENhcmQiLCJuZXdDYXJkIiwiX2ltYWdlRWxlbWVudCIsIl9jYXB0aW9uRWxlbWVudCIsInNyYyIsImFsdCIsInByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiY2FyZEZvcm1WYWxpZGF0b3IiLCJ1c2VyRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=